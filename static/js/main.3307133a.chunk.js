(this["webpackJsonpaccord-frontend"]=this["webpackJsonpaccord-frontend"]||[]).push([[0],{172:function(e,t,n){},188:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},545:function(e,t,n){},563:function(e,t,n){},564:function(e,t,n){"use strict";n.r(t);var c,a=n(1),r=n.n(a),i=n(31),s=n.n(i),l=n(17),o=n(24),d=(n(172),n(2)),u=n(7),b=n(10),j=n.n(b),f=n(0),m=function(e){return Object(f.jsx)("button",Object(u.a)(Object(u.a)({},e),{},{className:j()("rounded-full ring ring-gray-400 secondary px-4 py-1",e.className),children:e.children}))},h=function(){var e=Object(d.c)((function(e){return e.auth.user}));return Object(f.jsxs)("nav",{className:"flex items-center justify-between h-15 p-4 px-8",children:[Object(f.jsxs)("a",{className:"logo",children:[Object(f.jsx)("span",{className:"font-bold text-white",children:"accord"}),Object(f.jsx)("span",{className:"text-gray-600",children:"."}),Object(f.jsx)("span",{className:"muted font-light",children:"app"})]}),Object(f.jsx)("div",{children:Object(f.jsx)(l.b,{to:e?"/channels/@me":"/login",children:Object(f.jsx)(m,{children:e?"App":"Login"})})})]})},O=n(16),p=n(79),v=new(n(159).EventEmitter),g=Object(O.c)({name:"ui",initialState:{},reducers:{startedEditingMessage:function(e,t){var n=t.payload;e.editingMessageId=n},stoppedEditingMessage:function(e){delete e.editingMessageId},focusedResource:function(e,t){var n=t.payload;e.activeResource=n},focusedInvite:function(e,t){var n=t.payload;e.activeInvite=n},focusedUser:function(e,t){var n=t.payload;e.activeUser=n},pageSwitched:function(e,t){var n=t.payload;e.activeChannel=n.channel,e.activeGuild=n.guild},openedModal:function(e,t){var n=t.payload;e.openModal=n},closedModal:function(e){delete e.openModal},toggleDropdown:function(e,t){var n=t.payload;e.openDropdown=null===n||void 0===n?void 0:n.name},toggleSaveChanges:function(e,t){var n=t.payload;e.saveChangesOpen=n}}}),x=g.actions,N=g.reducer,y=function(e){return function(t,n){n().ui.saveChangesOpen!==e&&t(x.toggleSaveChanges(e))}},E=function(e){return function(t){t(x.focusedUser(e)),t(x.openedModal("UserProfile"))}},w=function(e){return function(){return v.emit("dialog",e)}},I=function(e){e(x.closedModal()),e(y(!1)),e(x.focusedUser(null))},C=n(18),S=function(e){var t=e.title,n=e.count,c=e.className;return Object(f.jsxs)("h2",{className:j()("uppercase font-bold text-xs tracking-wider",c),children:[t," ",void 0!==n&&"\u2014 ".concat(n)]})},A=n(45),k=n(160),M=n.n(k),T={sm:"rounded-lg 2xl:w-1/4 2xl:inset-x-1/3 2xl:inset-y-1/3   md:w-1/3 md:inset-x-1/3 md:inset-y-1/4",md:"rounded-lg 2xl:w-1/3 2xl:inset-x-1/3 2xl:inset-y-1/4   md:w-1/4 md:inset-x-1/3 md:inset-y-1/3",lg:"rounded-lg 2xl:w-1/3 2xl:inset-x-1/3 2xl:top-1/4       md:w-1/3 md:inset-x-1/3 md:top-20",xl:"rounded-lg 2xl:w-1/2 2xl:inset-x-1/4 2xl:top-1/4       md:w-1/3 md:inset-x-1/3 md:top-20",full:"h-full w-full"},_=function(e){var t=e.className,n=e.typeName,c=e.size,a=e.children,r=Object(d.b)(),i=Object(d.c)((function(e){return e.ui.openModal})),s=Object(A.b)().closeSnackbar;return Object(f.jsx)(M.a,{className:j()("bg-bg-primary overflow-auto fixed outline-none",t,T[null!==c&&void 0!==c?c:"sm"]),appElement:document.querySelector("#root"),isOpen:i===n,onRequestClose:function(){r(I),s("saveChanges")},children:a})},L=n(27),D=n(20),G=function(){return{Authorization:"Bearer ".concat(R())}},R=function(){return localStorage.getItem("token")},U={restCallBegan:Object(O.b)("api/restCallBegan"),restCallSucceded:Object(O.b)("api/restCallSucceeded"),restCallFailed:Object(O.b)("api/restCallFailed"),wsCallBegan:Object(O.b)("api/wsCallBegan"),wsCallSucceded:Object(O.b)("api/wsCallSucceeded"),wsCallFailed:Object(O.b)("api/wsCallFailed")},V=function(e,t){return function(n){var c=new FormData;c.append("file",e),n(U.restCallBegan({method:"post",url:"/upload",data:c,headers:Object(u.a)(Object(u.a)({},G()),{},{"Content-Type":"multipart/form-data"}),callback:t}))}},B=function(e){return function(t){return!e.some((function(e){return e.id===t.id}))}},P=Object(O.c)({name:"channels",initialState:[],reducers:{fetched:function(e,t){var n=t.payload;e.push.apply(e,Object(D.a)(n.filter(B(e))))},created:function(e,t){var n=t.payload;e.push(n.channel)},deleted:function(e,t){var n=t.payload,c=e.findIndex((function(e){return e.id===n.channelId}));e.splice(c,1)},updated:function(e,t){var n=t.payload,c=e.findIndex((function(e){return e.id===n.channelId}));Object.assign(e[c],n.partialChannel)}}}),H=P.actions,F=P.reducer,z=function(e){return function(t){t(U.wsCallBegan({event:"CHANNEL_DELETE",data:{channelId:e}}))}},W=function(e,t){return function(n){n(U.wsCallBegan({event:"CHANNEL_UPDATE",data:Object(u.a)({channelId:e},t)}))}},Y=function(e){return Object(p.a)((function(e){return e.entities.channels}),(function(t){return t.find((function(t){return t.id===e}))}))},K=function(e){return Object(f.jsx)("button",Object(u.a)(Object(u.a)({},e),{},{className:"rounded-md py-1.5 px-4 ".concat(e.className),children:e.children}))},J=function(e){return Object(u.a)(Object(u.a)({},e),{},{titleName:void 0,initialValue:void 0})},$=(n(188),function(e){var t=e.label,n=e.name,c=e.register,a=e.options,r=e.type,i=e.autoFocus,s=e.className,l=e.disabled;return Object(f.jsxs)("div",{className:s,"data-v-ba4d185f":"",children:[t&&Object(f.jsx)("label",{htmlFor:n,className:"uppercase text-xs font-semibold","data-v-ba4d185f":"",children:t}),Object(f.jsx)("input",Object(u.a)(Object(u.a)(Object(u.a)({id:n,type:null!==r&&void 0!==r?r:"text",autoFocus:i,disabled:l},J(e)),c(n,Object(u.a)({},a))),{},{className:j()("block bg-bg-secondary rounded focus:outline-none w-full h-10 p-2 mt-2",{"h-12":"file"===r}),"data-v-ba4d185f":""}))]})}),q=function(e){var t=Object(A.b)(),n=t.closeSnackbar,c=t.enqueueSnackbar,r=Object(d.b)(),i=Object(d.c)((function(e){return e.ui.saveChangesOpen}));Object(a.useEffect)((function(){i&&c("",{anchorOrigin:{vertical:"bottom",horizontal:"center"},content:o,key:"saveChanges",persist:!0})}),[i]);var s=function(t){n("saveChanges"),e.onSave(t),r(y(!1))},l=function(){for(var t in n("saveChanges"),e.obj){var c;null===(c=e.setValue)||void 0===c||c.call(e,t,e.obj[t])}r(y(!1))},o=function(){return Object(f.jsxs)("div",{id:"saveChanges",className:"opacity-95 flex justify-between rounded bg-black p-3 px-5",style:{width:"50vw"},children:[Object(f.jsx)("span",{className:"flex items-center flex-grow-1",children:"Careful \u2014 you have unsaved changes!"}),Object(f.jsxs)("span",{children:[Object(f.jsx)(K,{className:"bg-transparent font",onClick:l,children:"Reset"}),Object(f.jsx)(K,{className:"bg-success text-black ml-2",onClick:s,children:"Save"})]})]})};return null},Z=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.activeChannel})),n=(Object(d.c)((function(e){return e.ui.activeGuild})),Object(L.a)()),c=n.register,a=n.handleSubmit,r=n.setValue;return Object(f.jsxs)("form",{onChange:function(){return e(y(!0))},className:"flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{className:"text-xl font-bold inline",children:"Channel Overview"})}),Object(f.jsxs)("section",{className:"w-1/3",children:[Object(f.jsx)($,{label:"Name",name:"name",register:c,options:{value:t.name},className:"pt-5"}),Object(f.jsx)($,{label:"Summary",name:"summary",register:c,options:{value:t.summary},className:"pt-5"})]}),Object(f.jsx)(S,{className:"py-2 mt-5",title:"Advanced Settings"}),Object(f.jsx)("section",{children:Object(f.jsx)(K,{type:"button",onClick:function(){window.confirm("Are you sure you want to delete this guild?")&&e(z(t.id))},className:"bg-danger",children:"Delete"})}),Object(f.jsx)(q,{setValue:r,onSave:function(n){a((function(n){return e(W(t.id,n))}))(n)},obj:t})]})},X=n(21),Q=n(8),ee=n.n(Q),te=n(22),ne=Object(O.c)({name:"guilds",initialState:[],reducers:{fetched:function(e,t){var n=t.payload;e.push.apply(e,Object(D.a)(n.filter(B(e))))},created:function(e,t){var n=t.payload;e.push(n.guild)},updated:function(e,t){var n=t.payload,c=e.find((function(e){return e.id===n.guildId}));Object.assign(c,n.partialGuild)},deleted:function(e,t){var n=t.payload,c=e.findIndex((function(e){return e.id===n.guildId}));e.splice(c,1)}}}),ce=ne.actions,ae=ne.reducer,re=function(e,t){return function(n){n(U.wsCallBegan({event:"GUILD_UPDATE",data:Object(u.a)({guildId:e},t)}))}},ie=function(e){return Object(p.a)((function(e){return e.entities.guilds}),(function(t){return t.find((function(t){return t.id===e}))}))},se=function(e){return Object(p.a)((function(e){return e.entities.channels}),(function(t){return t.filter((function(t){return t.guildId===e}))}))},le=function(e){return Object(p.a)((function(e){return e.entities.roles}),(function(t){return t.filter((function(t){return t.guildId===e}))}))},oe=n(11),de=n(15),ue=function(e){var t=e.ids;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("hr",{className:"mt-3 border-bg-primary pt-2"}),t.map((function(e){var t=e.title,n=e.id;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"float-none -mb-1 text-xs",children:t}),Object(f.jsxs)("div",{title:t,className:"flex items-center justify-between pb-2",children:[Object(f.jsx)("span",{className:"muted",children:n}),Object(f.jsx)(de.a,{icon:oe.l})]})]},n)}))]})},be=function(e){var t=e.role,n=Object(d.c)((function(e){return e.config.devMode}));return Object(f.jsxs)(X.a,{id:t.id,className:"bg-bg-tertiary rounded shadow w-48 p-2",children:[Object(f.jsx)("div",{style:{color:t.color},children:t.name}),n&&Object(f.jsx)(ue,{ids:[{title:"Role ID",id:t.id}]})]},t.id)},je=function(e){var t=e.id,n=e.tab,c=e.setTab,a=e.children,r=e.className,i=Object(d.c)((function(e){return e.ui.saveChangesOpen}));return Object(f.jsx)(l.b,Object(u.a)(Object(u.a)({},e),{},{to:"#",onClick:function(){if(i)return function(){var e=document.querySelector("#saveChanges");e&&(e.style.backgroundColor="var(--danger)")}();null===c||void 0===c||c(t)},className:j()("flex items-center rounded py-1.5 px-2.5 h-8 mb-0.5",r,{active:n===t}),children:a}))},fe=n(82),me=function(e){var t={singleValue:function(){return{display:"none"}},control:function(){return{width:"100%",backgroundColor:"var(--bg-secondary)",borderRadius:"5px"}},option:function(e,t){var n=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:n.color,backgroundColor:"var(--bg-secondary)",cursor:"pointer"})},input:function(e){return Object(u.a)(Object(u.a)({},e),{},{color:"var(--font)"})},menu:function(e){return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:"var(--bg-secondary)"})},multiValue:function(e){return Object(u.a)(Object(u.a)({},e),{},{color:"var(--font)",backgroundColor:"var(--bg-tertiary)"})},indicatorSeparator:function(){return{display:"none"}},indicatorsContainer:function(e){return Object(u.a)(Object(u.a)({},e),{},{float:"right"})},multiValueLabel:function(e,t){var n=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:n.color,backgroundColor:"var(--bg-tertiary)"})}};return Object(f.jsx)(fe.a,{placeholder:"Add role...",options:e.unadded.map(e.mapOptions),styles:t,onChange:e.onChange,noOptionsMessage:function(){return"All roles have been added"}})},he=function(){var e,t,n,c,r=Object(o.i)().guildId,i=Object(d.b)(),s=Object(d.c)((function(e){return e.ui.activeChannel})),l=function(e,t){return e.position>t.position?1:-1},b=Object(d.c)(le(r)).sort(l),j=null===(e=s.overrides)||void 0===e?void 0:e[0],m=Object(a.useState)(j?Object(u.a)({},j):void 0),h=Object(C.a)(m,2),O=h[0],p=h[1],v=b.filter((function(e){var t;return!(null===(t=s.overrides)||void 0===t?void 0:t.some((function(t){return t.roleId===e.id})))})),g=b.filter((function(e){var t;return null===(t=s.overrides)||void 0===t?void 0:t.some((function(t){return t.roleId===e.id}))})),x=Object(a.useState)(null!==(t=null===(n=g[0])||void 0===n?void 0:n.id)&&void 0!==t?t:""),N=Object(C.a)(x,2),y=N[0],E=N[1],w=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{children:"In development..."})})},I=b.find((function(e){return e.id===y})),A=null===(c=s.overrides)||void 0===c?void 0:c.some((function(e){return e.roleId===y}));return O&&I&&!A&&g.push(I),Object(f.jsxs)("div",{className:"grid grid-cols-12 flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsx)("div",{className:"lg:col-span-3 col-span-12",children:Object(f.jsxs)("nav",{className:"pr-10",children:[g.sort(l).map((function(e){return Object(f.jsxs)(X.b,{id:e.id,children:[Object(f.jsx)(je,{style:{color:e.color},tab:y,setTab:E,id:e.id,children:e.name}),Object(f.jsx)(be,{role:e})]},e.id)})),Object(f.jsx)(S,{className:"m-1 mt-3",title:"Add Role"}),Object(f.jsx)(me,{mapOptions:function(e){return{label:e.name,value:e.id,color:e.color}},onChange:function(e){var t=e.value;p({allow:0,deny:0,roleId:t}),E(t)},unadded:v})]})}),Object(f.jsx)("div",{className:"lg:col-span-9 col-span-12",children:O&&Object(f.jsx)(w,{})}),Object(f.jsx)(q,{onSave:function(e){var t,n=null!==(t=JSON.parse(JSON.stringify(s.overrides)))&&void 0!==t?t:[];O&&O.allow+O.deny>0&&n.push(O),i(W(s.id,{overrides:n}))},obj:{overrides:O}})]})},Oe=function(){var e=Object(d.b)(),t=Object(A.b)().closeSnackbar;return Object(f.jsxs)("div",{className:"rounded-full ring ring-gray-500 cursor-pointer border-white rounded-full px-2 w-16 mt-14",onClick:function(){e(I),t("saveChanges")},children:[Object(f.jsx)(de.a,{icon:oe.s,color:"var(--muted)"}),Object(f.jsx)("span",{className:"pl-1.5 muted",children:"ESC"})]})},pe=n(59),ve=n(60),ge=Object(O.c)({name:"members",initialState:[],reducers:{fetched:function(e,t){var n=t.payload;e.push.apply(e,Object(D.a)(n.filter(B(e))))},added:function(e,t){var n=t.payload;e.push(n.member)},removed:function(e,t){var n=t.payload,c=e.findIndex((function(e){return e.id===n.memberId}));e.splice(c,1)},updated:function(e,t){var n=t.payload,c=e.find((function(e){return e.id===n.memberId}));Object.assign(c,n.partialMember)}}}),xe=ge.actions,Ne=ge.reducer,ye=function(e,t){return Object(p.a)((function(e){return e.entities.members}),(function(n){return n.find((function(n){return n.guildId===e&&n.userId===t}))}))},Ee=function(e){return Object(p.a)((function(e){return{user:e.auth.user,members:e.entities.members}}),(function(t){var n=t.user;return t.members.find((function(t){return t.guildId===e&&t.userId===n.id}))}))},we=Object(O.c)({name:"roles",initialState:[],reducers:{fetched:function(e,t){var n=t.payload;e.push.apply(e,Object(D.a)(n.filter(B(e))))},created:function(e,t){var n=t.payload;e.push(n.role)},updated:function(e,t){var n=t.payload,c=e.find((function(e){return e.id===n.roleId}));Object.assign(c,n.partialRole)},deleted:function(e,t){var n=t.payload,c=e.findIndex((function(e){return e.id===n.roleId}));e.splice(c,1)}}}),Ie=we.actions,Ce=we.reducer,Se=function(e){return Object(p.a)((function(e){return e.entities.roles}),(function(t){return t.filter((function(t){return e.includes(t.id)}))}))},Ae=function(e,t){return Object(p.a)((function(e){return{members:e.entities.members,roles:e.entities.roles}}),(function(n){var c,a=n.members,r=n.roles,i=a.find((function(n){return n.guildId===e&&n.userId===t}));return i?r.filter((function(e){return i.roleIds.includes(e.id)})).reduce((c="position",function(e,t){return e<t[c]?e:t})):null}))};!function(e){var t,n,a;!function(e){e[e.VIEW_CHANNELS=1024]="VIEW_CHANNELS",e[e.MANAGE_INVITES=256]="MANAGE_INVITES",e[e.CREATE_INVITE=128]="CREATE_INVITE",e[e.KICK_MEMBERS=64]="KICK_MEMBERS",e[e.MANAGE_CHANNELS=16]="MANAGE_CHANNELS",e[e.MANAGE_ROLES=8]="MANAGE_ROLES",e[e.MANAGE_GUILD=4]="MANAGE_GUILD",e[e.ADMINISTRATOR=1]="ADMINISTRATOR"}(t||(t={})),e.General=t,function(e){e[e.READ_MESSAGES=8192]="READ_MESSAGES",e[e.MANAGE_MESSAGES=4096]="MANAGE_MESSAGES",e[e.SEND_MESSAGES=2048]="SEND_MESSAGES"}(n||(n={})),e.Text=n,function(e){e[e.SPEAK=65536]="SPEAK",e[e.CONNECT=32768]="CONNECT"}(a||(a={})),e.Voice=a;e.All=Object(u.a)(Object(u.a)(Object(u.a)({},t),n),a),e.defaultPermissions=c.General.VIEW_CHANNELS|c.General.CREATE_INVITE|c.Text.SEND_MESSAGES|c.Text.READ_MESSAGES}(c||(c={}));var ke,Me,Te=function(){function e(t){Object(pe.a)(this,e),this.state=t,this.description={general:{ADMINISTRATOR:"Gives all permissions. This is a dangerous permission.",CREATE_INVITE:"Ability to create invites for users to join this guild.",KICK_MEMBERS:"Ability to kick members from this guild.",MANAGE_CHANNELS:"Ability to create, edit, or delete channels.",MANAGE_GUILD:"Ability to edit general guild settings.",MANAGE_ROLES:"Ability to create, update, and delete guild roles.",VIEW_CHANNELS:"Ability to view channels.",MANAGE_INVITES:"Ability to delete invites."},text:{MANAGE_MESSAGES:"Ability to manage message other member's messages.",READ_MESSAGES:"Ability to read messages,",SEND_MESSAGES:"Ability to send messages in text channels."}}}return Object(ve.a)(e,[{key:"canMember",value:function(e,t,n){return t.ownerId===n.userId||this.hasPerm(this.getTotalPerms(n,t.id),c.All[e])}},{key:"canInChannel",value:function(e,t,n){var a,r,i=this.getChannel(n),s=this.getSelfMember(t),l=null!==(a=null===(r=i.overrides)||void 0===r?void 0:r.filter((function(e){return s.roleIds.includes(e.roleId)})))&&void 0!==a?a:[],o=l.reduce((function(e,t){return e|t.allow}),0),d=l.reduce((function(e,t){return e|t.deny}),0),u=c.Text[e],b=this.can(e,t),j=this.hasPerm(o,u),f=this.hasPerm(d,u);return b&&!f||j}},{key:"can",value:function(e,t){var n=this.getGuild(t),a=this.getSelfMember(t);return n.ownerId===a.userId||this.hasPerm(this.getTotalPerms(a,t),c.All[e])}},{key:"getTotalPerms",value:function(e,t){return le(t)(this.state).filter((function(t){return null===e||void 0===e?void 0:e.roleIds.includes(t.id)})).reduce((function(e,t){return t.permissions|e}),0)}},{key:"hasPerm",value:function(e,t){return Boolean(e&t)||Boolean(e&c.General.ADMINISTRATOR)}},{key:"canManage",value:function(e,t,n){var c=ye(t,n)(this.state);return!!c&&(this.can(e,t)&&(this.state.auth.user.id===c.userId||this.memberIsHigher(t,c.roleIds)))}},{key:"canPunish",value:function(e,t,n){return this.state.auth.user.id!==n&&this.can(e,t)&&this.canManage(e,t,n)}},{key:"memberIsHigher",value:function(e,t){var n=this.getGuild(e),c=this.getSelfMember(e),a=Se(c.roleIds)(this.state),r=Se(t)(this.state),i=function(e){return function(t,n){return t[e]>n[e]?t:n}},s=a.reduce(i("position")),l=r.reduce(i("position")),o=c.userId===n.ownerId,d=s.position>l.position;return o||d}},{key:"getHighestRole",value:function(e){var t;return e.reduce((t="position",function(e,n){return e[t]>n[t]?e:n}))}},{key:"getChannel",value:function(e){var t=Y(e)(this.state);if(!t)throw new TypeError("Channel not found");return t}},{key:"getGuild",value:function(e){var t=ie(e)(this.state);if(!t)throw new TypeError("Guild not found");return t}},{key:"getSelfMember",value:function(e){var t=Ee(e)(this.state);if(!t)throw new TypeError("Member not found");return t}}]),e}(),_e=function(){var e=Object(d.d)().getState();return new Te(e)},Le=function(e){var t=e.className,n=e.tabs,c=e.setTab,a=e.tab,r=e.predicate,i=e.linkStyle,s=e.activeLinkStyle;return Object(f.jsx)("div",{className:t,children:n.map((function(e){return(!r||(null===r||void 0===r?void 0:r(e)))&&Object(f.jsx)(je,{style:Object(u.a)(Object(u.a)({},i),e.id===a?s:{}),tab:a,setTab:c,id:e.id,children:e.name},e.id)}))})},De=function(){var e=Object(d.c)((function(e){return e.ui.activeChannel})),t=Object(d.c)((function(e){return e.ui.activeGuild})),n=Object(a.useState)("overview"),c=Object(C.a)(n,2),r=c[0],i=c[1],s=_e();return e?Object(f.jsx)(_,{typeName:"ChannelSettings",size:"full",children:Object(f.jsxs)("div",{className:"grid grid-cols-12 h-full",children:[Object(f.jsx)("div",{className:"col-span-4 bg-bg-secondary",children:Object(f.jsxs)("nav",{className:"float-right flex-grow py-14 w-48 my-1 mr-4",children:[Object(f.jsx)(S,{className:"muted px-2.5 pb-1.5",title:"#".concat(e.name)}),Object(f.jsx)(Le,{tabs:[{perm:"MANAGE_CHANNELS",name:"Overview",id:"overview"},{perm:"MANAGE_CHANNELS",name:"Perms",id:"perms"}],tab:r,setTab:i,predicate:function(e){return s.can(e.perm,t.id)}})]})}),Object(f.jsxs)("div",{className:"col-span-6 h-full",children:["overview"===r&&Object(f.jsx)(Z,{}),"perms"===r&&Object(f.jsx)(he,{})]}),Object(f.jsx)("div",{className:"col-span-2 h-full",children:Object(f.jsx)(Oe,{})})]})}):null},Ge=function(){var e=Object(d.b)(),t=Object(L.a)(),n=t.register,c=t.handleSubmit,a=t.setValue,r=Object(d.c)((function(e){return e.ui.activeGuild})),i=["TEXT","VOICE"];return Object(f.jsx)(_,{typeName:"CreateChannel",size:"lg",children:Object(f.jsxs)("form",{className:"flex flex-col h-full",onSubmit:c((function(t){e(function(e,t){var n=t.name,c=t.type;return function(t){t(U.wsCallBegan({event:"CHANNEL_CREATE",data:{guildId:e,name:n,type:c}}))}}(r.id,t)),a("name","")})),children:[Object(f.jsx)("header",{className:"text-center mb-5 p-5",children:Object(f.jsx)("h1",{className:"text-2xl font-bold inline",children:"Create Channel"})}),Object(f.jsx)("div",{className:"flex-grow p-5",children:Object(f.jsx)($,{label:"Channel Name",name:"name",register:n})}),Object(f.jsxs)("div",{className:"flex-grow pt-0 p-5",children:[Object(f.jsx)("label",{htmlFor:"channelType",className:"uppercase text-xs font-semibold",children:"Channel Type"}),Object(f.jsx)("select",Object(u.a)(Object(u.a)({id:"channelType",className:"block bg-bg-secondary rounded focus:outline-none w-full h-10 p-2 mt-2",defaultValue:i[0]},n("type")),{},{children:i.map((function(e){return Object(f.jsx)("option",{value:e,children:e},e)}))}))]}),Object(f.jsx)("footer",{className:"bg-bg-secondary",children:Object(f.jsx)(K,{className:"bg-primary font float-right m-4",children:"Create"})})]})})},Re=function(){var e=Object(d.b)(),t=Object(L.a)(),n=t.register,c=t.handleSubmit,a=Object(L.a)(),r=a.register,i=a.handleSubmit;return Object(f.jsxs)(_,{className:"p-5",typeName:"CreateGuild",size:"lg",children:[Object(f.jsxs)("header",{className:"text-center mb-5",children:[Object(f.jsx)("h1",{className:"text-3xl font-bold inline",children:"Create Guild"}),Object(f.jsxs)("p",{className:"lead",children:["Hang out with your friends. ",Object(f.jsx)("br",{}),"Create an epic guild, or join with friends."]})]}),Object(f.jsx)("h3",{className:"uppercase font-bold mt-10",children:"Join One"}),Object(f.jsxs)("form",{onSubmit:c((function(t){return e((n=t.inviteCode,function(e){e(U.wsCallBegan({event:"GUILD_MEMBER_ADD",data:{inviteCode:n}}))}));var n})),children:[Object(f.jsx)($,{label:"Invite Code",name:"inviteCode",register:n}),Object(f.jsx)(K,{className:"bg-tertiary w-full h-11 mt-8",children:"Join"})]}),Object(f.jsx)("h3",{className:"uppercase font-bold mt-10",children:"Make Your Own"}),Object(f.jsxs)("form",{onSubmit:i((function(t){return e((n=t.name,function(e){e(U.wsCallBegan({event:"GUILD_CREATE",data:{name:n}}))}));var n})),children:[Object(f.jsx)($,{label:"Guild Name",name:"name",register:r}),Object(f.jsx)(K,{className:"bg-primary font w-full h-11 mt-8",children:"Create"})]})]})},Ue=Object(O.c)({name:"invites",initialState:{fetched:{},list:[]},reducers:{fetched:function(e,t){var n=e.list,c=e.fetched,a=t.payload,r=a[0].guildId;n.push.apply(n,Object(D.a)(a.filter(B(n)))),c.push(r)},created:function(e,t){var n=e.list,c=t.payload;n.push(c.invite)}}}),Ve=Ue.actions,Be=Ue.reducer,Pe=function(){var e=Object(d.b)(),t=Object(L.a)(),n=t.register,c=t.setValue,r=Object(d.c)((function(e){return e.ui})),i=r.activeGuild,s=r.activeInvite,l=r.openModal;c("inviteCode",null===s||void 0===s?void 0:s.id);var o="CreateInvite"===l;Object(a.useEffect)((function(){var t;!s&&i&&o&&e((t=i.id,function(e){e(U.wsCallBegan({event:"INVITE_CREATE",data:{guildId:t}}))}))}),[o]);return s?Object(f.jsxs)(_,{typeName:"CreateInvite",className:"p-5",children:[Object(f.jsx)("header",{className:"mb-3",children:Object(f.jsxs)("h1",{className:"font-bold inline uppercase",children:["Invite Friends to ",null===i||void 0===i?void 0:i.name]})}),Object(f.jsx)("h4",{className:"text-xs uppercase font-bold muted mb-3",children:"Or Send A Guild Invite To A Friend"}),Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsx)(K,{onClick:function(){return window.navigator.clipboard.writeText(s.id)},className:"absolute -right-3 top-5 m-4",children:"Copy"}),Object(f.jsx)($,{label:"Invite Code",name:"inviteCode",register:n,autoFocus:!0})]})]}):null},He=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.activeGuild})),n=Object(L.a)(),c=n.register,a=n.handleSubmit,r=n.setValue;return Object(f.jsxs)("form",{onChange:function(){return e(y(!0))},className:"flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{className:"text-xl font-bold inline",children:"Guild Overview"})}),Object(f.jsxs)("section",{className:"w-1/2",children:[Object(f.jsx)($,{label:"Name",name:"name",register:c,options:{value:t.name},className:"pt-5"}),Object(f.jsx)($,{type:"file",accept:"image/*",label:"Icon Image",name:"iconURL",className:"pt-5",register:function(){},options:{value:t.iconURL},onChange:function(n){var c,a,r=null===(c=n.currentTarget)||void 0===c||null===(a=c.files)||void 0===a?void 0:a[0];r&&e(function(e,t){return function(n){var c=function(){var t=Object(te.a)(ee.a.mark((function t(c){var a;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.url,t.abrupt("return",n(re(e,{iconURL:a})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();n(V(t,c))}}(t.id,r))}})]}),Object(f.jsx)(S,{className:"py-2 mt-5",title:"Advanced Settings"}),Object(f.jsx)("section",{children:Object(f.jsx)(K,{type:"button",onClick:function(){var n;window.confirm("Are you sure you want to delete this guild?")&&e((n=t.id,function(e){e(U.wsCallBegan({event:"GUILD_DELETE",data:{guildId:n}}))}))},className:"bg-danger",children:"Delete"})}),Object(f.jsx)(q,{setValue:r,onSave:function(n){a((function(n){return e(re(t.id,n))}))(n)},obj:t})]})},Fe=(n(201),function(e){return Object(f.jsx)("div",{className:j()("flex",e.className),"data-v-dbfdf70f":"",children:Object(f.jsx)("label",{htmlFor:e.id,className:"flex items-center cursor-pointer","data-v-dbfdf70f":"",children:Object(f.jsxs)("div",{className:"relative","data-v-dbfdf70f":"",children:[Object(f.jsx)("input",Object(u.a)(Object(u.a)({},e),{},{id:e.id,type:"checkbox",className:"sr-only",checked:e.checked,"data-v-dbfdf70f":""})),Object(f.jsx)("div",{className:"block bg-gray-600 w-14 h-8 rounded-full","data-v-dbfdf70f":""}),Object(f.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition","data-v-dbfdf70f":""})]})})})}),ze=function(e){var t=e.perms,n=e.setPerms,a=e.setRoleValue,r=Object(d.b)(),i=_e().description,s=function(e){n(e),a("permissions",e),r(y(!0))},l=function(e){return Boolean(t&c.All[e])},o=function(e){var n=e.category,a=e.permName;return Object(f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[Object(f.jsx)("span",{children:i[n][a]}),Object(f.jsx)(Fe,{id:a,checked:l(a),onChange:function(){return e=a,n=!l(a),s(n?t|c.All[e]:t&~c.All[e]);var e,n},className:"float-right"})]})};return Object(f.jsxs)(f.Fragment,{children:[Object.keys(i).map((function(e){return Object(f.jsxs)("div",{className:"mb-5",children:[Object(f.jsx)(S,{className:"muted pb-1.5 mt-5",title:e}),Object.keys(i[e]).map((function(t){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("strong",{title:c.All[t],className:"secondary",children:t}),Object(f.jsx)(o,{category:e,permName:t},t)]})}))]},e)})),Object(f.jsx)(K,{onClick:function(){return s(0)},className:"bg-white text-black",type:"button",children:"Clear"}),Object(f.jsx)(K,{onClick:function(){return s(c.defaultPermissions)},className:"bg-secondary text-black ml-2",type:"button",children:"Default"})]})},We=function(){var e,t=Object(d.b)(),n=Object(L.a)(),c=n.handleSubmit,r=n.register,i=n.setValue,s=n.getValues,l=Object(o.i)().guildId,b=Object(d.c)(le(l)),h=Object(a.useState)(b[0].id),O=Object(C.a)(h,2),v=O[0],g=O[1],x=Object(d.c)((e=v,Object(p.a)((function(e){return e.entities.roles}),(function(t){return t.find((function(t){return t.id===e}))})))),N=Object(a.useState)(0),E=Object(C.a)(N,2),w=E[0],I=E[1],A=Object(a.useState)(!1),k=Object(C.a)(A,2),M=k[0],T=k[1],_=_e();Object(a.useEffect)((function(){if(!x)return g(b[0].id);for(var e=0,t=["name","color","permissions","hoisted"];e<t.length;e++){var n=t[e];i(n,x[n])}I(x.permissions),T(x.hoisted)}),[x]);var D=function(){return Object(f.jsxs)("form",{className:"mb-10",onChange:function(){return t(y(!0))},children:[Object(f.jsxs)("div",{className:"flex gap-4",children:[Object(f.jsx)($,{label:"Name",name:"name",register:r}),Object(f.jsx)($,{label:"Color",name:"color",type:"color",register:r})]}),Object(f.jsxs)("div",{className:"mt-5",children:[Object(f.jsx)(S,{title:"Options",className:" pb-1.5 mt-5"}),Object(f.jsxs)("span",{children:[Object(f.jsx)("span",{children:"Separate role on member list"}),Object(f.jsx)(Fe,Object(u.a)(Object(u.a)({id:"hoisted",checked:M},r("hoisted")),{},{onChange:function(){T(!M),i("hoisted",!M)},className:"float-right"}))]})]}),Object(f.jsx)(ze,{perms:w,setPerms:I,setRoleValue:i}),Object(f.jsx)(K,{onClick:function(){return t(function(e,t){return function(n){n(U.wsCallBegan({event:"GUILD_ROLE_DELETE",data:{roleId:t,guildId:e}}))}}(l,x.id))},className:"bg-danger float-right",type:"button",children:"Delete"})]})},G=function(e){return _.memberIsHigher(l,[e.id])};return Object(f.jsxs)("div",{className:"grid grid-cols-12 flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsx)("div",{className:"lg:col-span-3 col-span-12",children:Object(f.jsxs)("nav",{className:"pr-10",children:[b.sort((function(e,t){return e.position>t.position?-1:1})).map((function(e){return Object(f.jsxs)(X.b,{id:e.id,children:[Object(f.jsx)(je,{className:j()({"cursor-not-allowed opacity-25":!G(e)}),style:{color:e.color},tab:v,setTab:function(){return G(e)&&g.apply(void 0,arguments)},id:e.id,children:e.name},e.id),Object(f.jsx)(be,{role:e})]},e.id)})),Object(f.jsx)(m,{onClick:function(){return t(function(e){return function(t){t(U.wsCallBegan({event:"GUILD_ROLE_CREATE",data:{guildId:e}}))}}(l))},style:{color:"var(--success)"},className:"ring-green-500 m-2",children:"Create"})]})}),Object(f.jsx)("div",{className:"lg:col-span-9 col-span-12",children:x&&Object(f.jsx)(D,{})}),Object(f.jsx)(q,{setValue:function(){i.apply(void 0,arguments),I(x.permissions),T(x.hoisted)},onSave:function(e){c((function(e){return t(function(e,t,n){return function(c){c(U.wsCallBegan({event:"GUILD_ROLE_UPDATE",data:Object(u.a)({roleId:t,guildId:e},n)}))}}(l,x.id,e))}))(e)},obj:s()})]})},Ye=function(){var e=Object(d.b)(),t=Object(o.i)().guildId,n=Object(d.c)(function(e){return Object(p.a)((function(e){return e.entities.invites.list}),(function(t){return t.filter((function(t){return t.guildId===e}))}))}(t)),c=function(){return Object(f.jsxs)("div",{className:"mt-2",children:[n.map((function(t){return Object(f.jsxs)("div",{className:"w-full mb-3",children:[Object(f.jsx)("strong",{children:t.id}),Object(f.jsx)("span",{className:"float-right",children:Object(f.jsx)("button",{type:"button",className:"danger rounded-full ring ring-red-500 px-2",onClick:function(){return e((n=t.id,function(e){e(U.wsCallBegan({event:"INVITE_DELETE",data:{inviteCode:n}}))}));var n},children:"x"})})]})})),!n.length&&Object(f.jsx)("span",{children:"No invites created."})]})};return Object(f.jsxs)("form",{onChange:function(){return e(y(!0))},className:"flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{className:"text-xl font-bold inline",children:"Invites"})}),Object(f.jsx)(c,{})]})},Ke=function(){var e=Object(d.c)((function(e){return e.ui.activeGuild})),t=Object(a.useState)("overview"),n=Object(C.a)(t,2),c=n[0],r=n[1],i=_e();return e?Object(f.jsx)(_,{typeName:"GuildSettings",size:"full",children:Object(f.jsxs)("div",{className:"grid grid-cols-12 h-full",children:[Object(f.jsx)("div",{className:"col-span-4 bg-bg-secondary",children:Object(f.jsxs)("nav",{className:"float-right flex-grow py-14 w-48 my-1 mr-4",children:[Object(f.jsx)(S,{className:"muted px-2.5 pb-1.5",title:e.name}),Object(f.jsx)(Le,{tabs:[{perm:"MANAGE_GUILD",name:"Overview",id:"overview"},{perm:"MANAGE_ROLES",name:"Roles",id:"roles"},{perm:"MANAGE_INVITES",name:"Invites",id:"invites"}],tab:c,setTab:r,predicate:function(t){return i.can(t.perm,e.id)}})]})}),Object(f.jsxs)("div",{className:"col-span-6 h-full",children:["overview"===c&&Object(f.jsx)(He,{}),"roles"===c&&Object(f.jsx)(We,{}),"invites"===c&&Object(f.jsx)(Ye,{})]}),Object(f.jsx)("div",{className:"col-span-2 h-full",children:Object(f.jsx)(Oe,{})})]})}):null},Je=function(){var e=Object(d.c)((function(e){return e.ui.activeResource})),t="https://api.accord.app/assets"+e;return e?Object(f.jsxs)(_,{size:"lg",typeName:"ImagePreview",className:"p-5 bg-transparent ",children:[Object(f.jsx)("img",{src:t,onError:function(e){e.currentTarget.onerror=null,e.currentTarget.src="".concat("https://api.accord.app/assets","/images/image-not-found.png")}}),Object(f.jsx)("a",{style:{color:"var(--normal)"},className:"pt-2",href:t,target:"_blank",children:"View Original"})]}):null},$e=n(48),qe=n.n($e),Ze=function(e){return Object(f.jsx)("img",Object(u.a)({onError:function(e){return e.currentTarget.src="".concat("https://api.accord.app/assets","/avatars/unknown.png")}},e))},Xe=(n(202),function(e){var t=e.to,n=e.imageURL,c=e.name,a=e.classes,r=void 0===a?"font":a,i=Object(o.h)();n&&(n="".concat("https://api.accord.app/assets").concat(n));var s=function(e){return e.split(" ").map((function(e){return e[0]})).join("").slice(0,3)},l=function(){return n?Object(f.jsx)(Ze,{className:"h-12 w-12",src:n,alt:c,"data-v-e7ffd8bf":""}):Object(f.jsx)("span",{className:"select-none flex items-center justify-center h-12 w-12","data-v-e7ffd8bf":"",children:s(c)})},d=t&&i.pathname.startsWith(t),u=d?"rounded-xl bg-primary":"rounded-full bg-bg-primary";return Object(f.jsxs)("div",{className:j()("wrapper",{active:d}),title:c,"data-v-e7ffd8bf":"",children:[Object(f.jsx)("div",{className:"selected rounded bg-white absolute -left-1 h-0 w-2","data-v-e7ffd8bf":""}),Object(f.jsx)("div",{className:j()("cursor-pointer guild-icon flex justify-center mb-2",u,r),"data-v-e7ffd8bf":"",children:Object(f.jsx)(l,{"data-v-e7ffd8bf":""})})]})}),Qe=function(e){var t,n=e.guild,c=e.user,a=e.size,r=void 0===a?"md":a,i=Object(d.c)(Ae(null===n||void 0===n?void 0:n.id,c.id)),s=(null===n||void 0===n?void 0:n.ownerId)===c.id,l=c.discriminator.toString().padStart(4,"0"),o="ONLINE"===c.status,u=function(){var e={color:o?"bg-success":"bg-gray-500",size:{lg:"h-6 w-6",md:"h-3.5 w-3.5",sm:"h-2 w-2"}[r]};return Object(f.jsx)("span",{className:"rounded-full absolute flex -right-0.5 -bottom-0.5",children:Object(f.jsx)("span",{style:{border:"2px solid var(--bg-secondary)"},className:j()("relative inline-flex rounded-full px-1",e.size,e.color,{hidden:"sm"===r})})})},b={lg:"text-lg",md:"text-sm",sm:"text-sm"}[r];return Object(f.jsxs)("div",{className:j()("flex items-center px-2","cursor-pointer",{"opacity-50":!o}),children:[Object(f.jsxs)("div",{className:"relative avatar mr-2",children:[Object(f.jsx)(u,{}),Object(f.jsx)(Ze,{className:{sm:"select-none rounded-full w-6 h-6",md:"select-none rounded-full w-8 h-8",lg:"select-none rounded-full w-20 h-20"}[r],src:"".concat("https://api.accord.app/assets").concat(c.avatarURL)})]}),Object(f.jsxs)("div",{className:"tag leading-4",children:[Object(f.jsxs)("h4",{className:j()({"font-bold":"sm"!==r},b),children:[Object(f.jsx)("span",{style:{color:null!==(t=null===i||void 0===i?void 0:i.color)&&void 0!==t?t:"var(--font)"},className:j()({"font-light text-base":n}),children:c.username}),Object(f.jsx)("span",{className:"text-yellow-400 ml-1",children:s&&"sm"!==r&&Object(f.jsx)(de.a,{icon:oe.f})})]}),!n&&"sm"!==r&&Object(f.jsxs)("div",{className:j()("discriminator",b),children:["#",l]})]})]})},et=function(){var e=Object(d.c)((function(e){return e.auth.user})),t=Object(d.c)((function(e){return e.ui.activeUser})),n=Object(a.useState)("info"),c=Object(C.a)(n,2),r=c[0],i=c[1],s={BUG_1:{color:"bronze",icon:oe.b,title:"Has destroyed a few bugs."},BUG_2:{color:"silver",icon:oe.b,title:"Has destroyed many bugs."},BUG_3:{color:"gold",icon:oe.b,title:"Are there any bugs left?"},OG:{color:"orange",icon:oe.r,title:"Was here since the very beginning."},STAFF:{color:"var(--primary)",icon:oe.j,title:"Staff."},VIEWER:{color:"var(--tertiary)",icon:oe.x,title:"This user was noticed in live chat."}},l=function(){return t?Object(f.jsx)("div",{className:"px-3 pt-2",children:t.badges.map((function(e){var t=s[e],n=t.color,c=t.icon,a=t.title;return Object(f.jsx)(de.a,{title:a,className:"pr-3",style:{color:n},size:"2x",icon:c})}))}):null},o=function(){return t?Object(f.jsx)("div",{className:"grid grid-cols-2",children:Object(f.jsxs)("div",{className:"col-span-1",children:[Object(f.jsx)("strong",{children:"Created: "}),Object(f.jsx)("span",{title:t.createdAt.toString(),children:qe()(t.createdAt).format("DD/MM/YYYY")})]})}):null},u=function(){var n=Object(d.d)();if(!t)return null;var c=e.guildIds.filter((function(e){return t.guildIds.includes(e)})).map((function(e){return ie(e)(n.getState())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)(S,{title:"".concat(c.length," Mutual Guilds"),className:"mb-2"}),Object(f.jsx)("div",{className:"mx-2",children:c.map((function(e){return e?Object(f.jsx)("div",{className:"w-12 -ml-2 float-left scale-200",children:Object(f.jsx)(Xe,{imageURL:e.iconURL,name:e.name})}):null}))})]})};return t?Object(f.jsxs)(_,{typeName:"UserProfile",size:"md",children:[Object(f.jsxs)("header",{className:"bg-bg-tertiary",children:[Object(f.jsxs)("div",{className:"p-5",children:[Object(f.jsx)(Qe,{size:"lg",user:t}),Object(f.jsx)(l,{})]}),Object(f.jsx)("hr",{className:"border-bg-primary"}),Object(f.jsx)(Le,{className:"normal p-2",tab:r,setTab:i,tabs:[{name:"Info",id:"info"},{name:"Mutual Guilds",id:"mutualGuilds"}],linkStyle:{color:"var(--normal)",fontWeight:"bold",padding:"0 0 30px 0",margin:"5px 10px",borderRadius:0,display:"inline-block"},activeLinkStyle:{borderBottom:"3px solid var(--normal)"}})]}),Object(f.jsxs)("main",{className:"p-4",children:["info"===r&&Object(f.jsx)(o,{}),"mutualGuilds"===r&&Object(f.jsx)(u,{})]})]}):null},tt=function(e){return JSON.parse(localStorage.getItem("config.".concat(e)))},nt=function(e,t){return JSON.parse(localStorage.setItem("config.".concat(e),t))},ct=Object(O.c)({name:"config",initialState:{devMode:null!==(ke=tt("devMode"))&&void 0!==ke&&ke,memberListToggled:null===(Me=tt("memberListToggled"))||void 0===Me||Me},reducers:{toggleDevMode:function(e){var t=!e.devMode;e.devMode=t},toggleMemberList:function(e){var t=!e.memberListToggled;e.memberListToggled=t}}}),at=ct.actions,rt=ct.reducer,it=Object(O.c)({name:"meta",initialState:{fetchedEntities:!1,hasListenedToWS:!1,userCount:NaN},reducers:{fetchedEntities:function(e){e.fetchedEntities=!0},listenedToWS:function(e){e.hasListenedToWS=!0},ping:function(e,t){var n=t.payload;e.ping=n},updatedUserCount:function(e,t){var n=t.payload;e.userCount=n}}}),st=it.actions,lt=it.reducer,ot=Object(O.c)({name:"users",initialState:[],reducers:{fetched:function(e,t){var n=t.payload;e.push.apply(e,Object(D.a)(n.filter(B(e))))},updated:function(e,t){var n=t.payload,c=e.find((function(e){return e.id===n.userId}));c&&Object.assign(c,n.partialUser)},deleted:function(e,t){var n=t.payload,c=e.findIndex((function(e){return e.id===n.userId}));e.splice(c,1)}}}),dt=ot.actions,ut=ot.reducer,bt=function(e){return function(t){t(U.wsCallBegan({event:"USER_UPDATE",data:Object(u.a)(Object(u.a)({},e),{},{token:R()})}))}},jt=function(e){return Object(p.a)((function(e){return e.entities.users}),(function(t){var n;return null!==(n=t.find((function(t){return t.id===e})))&&void 0!==n?n:{avatarURL:"/avatars/unknown.png",discriminator:0,username:"Unknown"}}))},ft=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.user})),n=Object(L.a)(),c=n.register,a=n.handleSubmit,r=n.setValue,i=Object(d.c)((function(e){return e.config.devMode}));return Object(f.jsxs)("div",{className:"flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsxs)("form",{onChange:function(){return e(y(!0))},children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{className:"text-xl font-bold inline",children:"My Account"})}),Object(f.jsxs)("section",{className:"w-1/2",children:[Object(f.jsx)($,{label:"Username",name:"username",register:c,options:{value:t.username},className:"pt-5"}),Object(f.jsx)($,{label:"Email",name:"email",register:c,options:{value:t.email},className:"pt-5"}),Object(f.jsx)($,{type:"file",accept:"image/*",label:"Avatar Image",className:"pt-5",name:"avatarURL",register:function(){},options:{value:t.avatarURL},onChange:function(t){var n,c,a=null===(n=t.currentTarget)||void 0===n||null===(c=n.files)||void 0===c?void 0:c[0];a&&e(function(e){return function(t){var n=function(){var e=Object(te.a)(ee.a.mark((function e(n){var c;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.url,e.abrupt("return",t(bt({avatarURL:c})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t(V(e,n))}}(a))}})]}),Object(f.jsx)(q,{setValue:r,onSave:function(t){a((function(t){return e(bt(t))}))(t)},obj:t})]}),Object(f.jsx)(S,{className:"py-2 mt-5",title:"Advanced Settings"}),Object(f.jsxs)("section",{children:[Object(f.jsxs)("div",{className:"w-1/2 pb-5",children:[Object(f.jsx)("label",{htmlFor:"devMode",children:"Dev Mode"}),Object(f.jsx)(Fe,{onChange:function(e){return e.stopPropagation()},onClick:function(){return e((function(e,t){var n=t().config;e(at.toggleDevMode()),nt("devMode",!n.devMode)}))},checked:i,className:"float-right",id:"devMode"})]}),Object(f.jsx)(K,{role:"button",onClick:a((function(){window.confirm("Are you sure you want to delete your user?")&&e((function(e){e(U.wsCallBegan({event:"USER_DELETE",data:{token:R()}}))}))})),className:"bg-danger",children:"Delete"})]})]})},mt=Object(O.c)({name:"auth",initialState:{attemptedLogin:!1,shouldVerify:!1},reducers:{ready:function(e,t){var n=t.payload;e.user=n.user},updatedUser:function(e,t){var n=t.payload;Object.assign(e.user,n.partialUser)},loggedIn:function(e){e.attemptedLogin=!0},loggedOut:function(e){delete e.user,e.attemptedLogin=!1,e.shouldVerify=!1},shouldVerify:function(e){e.shouldVerify=!0}}}),ht=mt.actions,Ot=mt.reducer,pt=function(){return function(e,t){!t().auth.user&&R()&&e(U.wsCallBegan({event:"READY",data:{token:R()}}))}},vt=function(){return function(e){e(ht.loggedOut()),localStorage.removeItem("token")}},gt=function(e){return function(t){t(U.restCallBegan({onSuccess:[],url:"/auth/verify?code=".concat(e),callback:function(e){var n=e.message,c=e.token;n&&t(w({content:n,variant:"info"})),c&&(localStorage.setItem("token",c),t(pt()))}}))}},xt=function(){var e=Object(d.b)(),t=Object(L.a)(),n=Object(d.c)((function(e){return e.auth.user}));return Object(f.jsxs)("div",{className:"flex flex-col pt-14 px-10 pb-20 h-full mt-1",children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{className:"text-xl font-bold inline",children:"Account Security"})}),Object(f.jsx)(S,{className:"py-2 mt-5",title:"Change Password"}),Object(f.jsxs)("section",{className:"w-1/2",children:[!n.verified&&Object(f.jsxs)("div",{className:"secondary",children:[Object(f.jsx)(de.a,{icon:oe.m}),Object(f.jsx)("span",{className:"ml-1",children:"To change your password, your email must be verified."})]}),Object(f.jsx)($,{label:"Old Password",name:"oldPassword",type:"password",register:t.register}),Object(f.jsx)($,{label:"New Password",name:"newPassword",type:"password",className:"pt-5",register:t.register}),Object(f.jsx)("div",{className:"flex justify-center w-full mt-4",children:Object(f.jsx)(K,{onClick:t.handleSubmit((function(n){var c=t.getValues(),a=c.oldPassword,r=c.newPassword;t.handleSubmit((function(){return e(function(e,t){return function(n,c){var a=c().auth.user;n(U.restCallBegan({onSuccess:[],method:"post",url:"/auth/change-password",data:{email:a.email,oldPassword:e,newPassword:t},callback:function(e){var t=e.message,c=e.token;t&&n(w({content:t,variant:"info"})),c&&localStorage.setItem("token",c)}}))}}(a,r))}))(n)})),className:"bg-warning",children:"Change"})})]}),Object(f.jsxs)("section",{className:"mt-10",children:[Object(f.jsx)(S,{title:"Login Status",className:"pb-2"}),n.verified?Object(f.jsxs)("div",{className:"success",children:[Object(f.jsx)(de.a,{icon:oe.c,className:"mr-1"}),Object(f.jsx)("span",{children:"Your email is verified and email 2FA is enabled."})]}):Object(f.jsxs)("div",{className:"warning",children:[Object(f.jsx)(de.a,{icon:oe.h,className:"mr-1"}),Object(f.jsx)("span",{children:"Your email is unverified which means email 2FA is unavailable."})]})]})]})},Nt=function(){var e=Object(d.c)((function(e){return e.auth.user})),t=Object(a.useState)("overview"),n=Object(C.a)(t,2),c=n[0],r=n[1];return e?Object(f.jsx)(_,{typeName:"UserSettings",size:"full",children:Object(f.jsxs)("div",{className:"grid grid-cols-12 h-full",children:[Object(f.jsx)("div",{className:"col-span-4 bg-bg-secondary",children:Object(f.jsxs)("nav",{className:"float-right flex-grow py-14 w-48 my-1 mr-4",children:[Object(f.jsx)(S,{className:"normal px-2.5 pb-1.5",title:"User Settings"}),Object(f.jsx)(Le,{tab:c,setTab:r,tabs:[{name:"Overview",id:"overview"},{name:"Security",id:"security"}]}),Object(f.jsx)("div",{className:"rounded-sm bg-bg-modifier-accent h-px w-42 my-2 mx-2.5 "}),Object(f.jsx)(l.b,{to:"/logout",className:"danger flex items-center rounded py-1.5 px-2.5 h-8 mb-0.5",children:"Logout"})]})}),Object(f.jsxs)("div",{className:"col-span-6 h-full",children:["overview"===c&&Object(f.jsx)(ft,{}),"security"===c&&Object(f.jsx)(xt,{})]}),Object(f.jsx)("div",{className:"col-span-2 h-full",children:Object(f.jsx)(Oe,{})})]})}):null},yt=n(161),Et=n.n(yt).a.connect("https://api.accord.app",{secure:!0,path:"/ws",transports:["websocket","polling","flashsocket"]});Et.io.on("open",(function(){return console.log("Connected to WS Server")}));var wt,It,Ct,St,At,kt,Mt=Et,Tt=Object(O.c)({name:"typing",initialState:[],reducers:{userTyped:function(e,t){var n=t.payload;e.push(n)},userStoppedTyping:function(e,t){var n=t.payload,c=_t(e,n.userId,n.channelId);e.splice(c,1)}}}),_t=function(e,t,n){return e.findIndex((function(e){return e.channelId===n&&e.userId===t}))},Lt=Tt.actions,Dt=Tt.reducer,Gt=Object(O.c)({name:"messages",initialState:{fetched:{},list:[]},reducers:{fetched:function(e,t){var n=e.list,c=e.fetched,a=t.payload;n.push.apply(n,Object(D.a)(a.filter(B(n)))),a.length&&(c[a[0].channelId]="testing")},created:function(e,t){var n=e.list,c=t.payload;n.push(c.message)},deleted:function(e,t){var n=e.list,c=t.payload,a=n.findIndex((function(e){return e.id===c.messageId}));n.splice(a,1)},updated:function(e,t){var n=e.list,c=t.payload,a=n.find((function(e){return e.id===c.message.id}));Object.assign(a,c.message)}}}),Rt=function(e){return Object(p.a)((function(e){return e.entities.messages.list}),(function(t){return t.filter((function(t){return t.channelId===e}))}))},Ut=function(e,t,n){return function(c){c(U.wsCallBegan({event:"MESSAGE_CREATE",data:Object(u.a)(Object(u.a)({},t),{},{channelId:e,attachmentURLs:n})}))}},Vt=Gt.actions,Bt=Gt.reducer,Pt=n(33),Ht=Object(O.c)({name:"pings",initialState:{},reducers:{initialized:function(e,t){var n=t.payload;Object.assign(e,n)},added:function(e,t){var n=t.payload;e[n.guildId].push(n.channelId)},channelMarkedAsRead:function(e,t){var n=t.payload,c=e[n.guildId],a=c.indexOf(n.channelId);c.splice(a,1)},guildMarkedAsRead:function(e,t){e[t.payload.guildId]=[]}}}),Ft=Ht.actions,zt=Ht.reducer,Wt=[];function Yt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(te.a)(ee.a.mark((function e(t){var n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kt=t,n=(new Date).getTime()-Ct,console.log("start feedback",n),St||At){e.next=6;break}return e.next=6,Jt();case 6:At.onstop||(At.onstop=qt),"recording"!==At.state&&At.start(),It=setTimeout((function(){return"recording"===At.state&&At.stop()}),300);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(){return $t.apply(this,arguments)}function $t(){return($t=Object(te.a)(ee.a.mark((function e(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:St=e.sent,(At=new MediaRecorder(St)).onstart=function(){return Wt=[]},At.ondataavailable=function(e){return Wt.push(e.data)},At.onstop=qt;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("stop recording"),Ct=(new Date).getTime(),t=new Blob(Wt,{type:"audio/ogg; codecs=opus"}),Mt.emit("VOICE_DATA",{channelId:kt,blob:t}),At.onstop=qt;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Mt.on("VOICE_DATA",function(){var e=Object(te.a)(ee.a.mark((function e(t){var n,c,a,r,i,s,l,o,d,u;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.channelId,c=t.connections,console.log("receive VOICE_DATA"),n){e.next=4;break}return e.abrupt("return");case 4:a=Object(Pt.a)(c);try{for(a.s();!(r=a.n()).done;)s=r.value,l=s.blob,o=s.userId,null===(i=document.querySelector("#voice".concat(o)))||void 0===i||i.remove(),d=new Blob([l],{type:"audio/ogg; codecs=opus"}),(u=document.createElement("audio")).id="voice".concat(o),u.src=window.URL.createObjectURL(d),u.play()}catch(b){a.e(b)}finally{a.f()}Yt(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Xt=function(){var e=Object(d.b)(),t=Object(o.g)(),n=Object(d.d)(),c=Object(d.c)((function(e){return e.meta.hasListenedToWS})),r=Object(A.b)().enqueueSnackbar,i=function(){return n.getState()};return Object(a.useEffect)((function(){if(!c){var n=function(e){return r("".concat(e.content,"."),{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:e.variant,autoHideDuration:5e3})};Mt.on("error",(function(e){var t,c;return n({variant:"error",content:null!==(t=null===(c=e.data)||void 0===c?void 0:c.message)&&void 0!==t?t:e.message})})),v.on("dialog",n),Mt.on("CHANNEL_CREATE",(function(n){var c=i(),a=c.auth,r=c.ui,s=n.creatorId===a.user.id;if(e(H.created(n)),s&&r.activeGuild){if(e(x.closedModal()),"VOICE"===n.channel.type)return;t.push("/channels/".concat(r.activeGuild.id,"/").concat(n.channel.id))}})),Mt.on("CHANNEL_DELETE",(function(n){var c,a=i().ui;n.channelId===(null===(c=a.activeChannel)||void 0===c?void 0:c.id)&&a.activeGuild&&t.push("/channels/".concat(a.activeGuild.id)),e(H.deleted(n))})),Mt.on("CHANNEL_UPDATE",(function(t){return e(H.updated(t))})),Mt.on("GUILD_CREATE",(function(n){e(dt.fetched(n.users)),e(H.fetched(n.channels)),e(xe.fetched(n.members)),e(Ie.fetched(n.roles)),e(ce.created(n)),e(x.closedModal()),t.push("/channels/".concat(n.guild.id))})),Mt.on("GUILD_DELETE",(function(n){var c,a=i().ui;n.guildId===(null===(c=a.activeGuild)||void 0===c?void 0:c.id)&&(e(x.closedModal()),t.push("/channels/@me")),e(ce.deleted(n));var r=Ee(n.guildId)(i()).id;e(xe.removed({memberId:r}))})),Mt.on("GUILD_MEMBER_ADD",(function(t){e(dt.fetched([t.user])),e(xe.added(t))})),Mt.on("GUILD_MEMBER_UPDATE",(function(t){return e(xe.updated(t))})),Mt.on("GUILD_MEMBER_REMOVE",(function(t){return e(xe.removed(t))})),Mt.on("GUILD_ROLE_CREATE",(function(t){return e(Ie.created(t))})),Mt.on("GUILD_ROLE_DELETE",(function(t){return e(Ie.deleted(t))})),Mt.on("GUILD_ROLE_UPDATE",(function(t){return e(Ie.updated(t))})),Mt.on("GUILD_UPDATE",(function(t){return e(ce.updated(t))})),Mt.on("INVITE_CREATE",(function(t){e(Ve.created(t)),e(x.focusedInvite(t.invite))})),Mt.on("MESSAGE_CREATE",(function(t){var n;if(!(null===(n=i().auth.user.ignored)||void 0===n?void 0:n.userIds.includes(t.message.authorId))){e(Vt.created(t));t.message.channelId;var c=i().ui.activeChannel;c&&c.id}})),Mt.on("MESSAGE_DELETE",(function(t){return e(Vt.deleted(t))})),Mt.on("MESSAGE_UPDATE",(function(t){return e(Vt.updated(t))})),Mt.on("PRESENCE_UPDATE",(function(t){var n=t.userId,c=t.status;return e(dt.updated({userId:n,partialUser:{status:c}}))})),Mt.on("READY",(function(t){e(ht.ready(t)),e(dt.fetched([t.user]))})),Mt.on("TYPING_START",(function(t){e(Lt.userTyped(t));setTimeout((function(){return e(Lt.userStoppedTyping(t))}),5e3)})),Mt.on("USER_DELETE",(function(){Mt.disconnect(),t.push("/"),e(vt())})),Mt.on("USER_UPDATE",(function(t){e(ht.updatedUser(t)),e(dt.updated(t))})),Mt.on("VOICE_STATE_UPDATE",function(){var t=Object(te.a)(ee.a.mark((function t(n){var c,a,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.userId,a=n.voice,r={userId:c,partialUser:{voice:a}},i().auth.user.id===c&&e(ht.updatedUser(r)),e(dt.updated(r)),!a.channelId){t.next=10;break}return t.next=8,Yt(a.channelId);case 8:t.next=11;break;case 10:console.log("stopping feedback"),clearTimeout(It),At&&"recording"===At.state&&(At.onstop=null,At.stop());case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e(st.listenedToWS())}}),[c]),null},Qt=function(e){var t=Object(d.b)(),n=Object(d.c)((function(e){return e.ui.openDropdown})),c=Object(d.c)((function(e){return e.config.devMode}));Object(a.useEffect)((function(){var t;document.title=null!==(t=e.pageTitle)&&void 0!==t?t:"accord.app"}),[]);return c||(console.log("%cAttention!","color: red; font-size: 32px; font-weight: 900;"),console.log("%cIf someone told you to paste something in this console, it's probably against the TOS and could steal your account.","color: darkred; font-size: 16px; font-weight: 700;")),Object(f.jsxs)("div",Object(u.a)(Object(u.a)({onClick:function(){return n&&t(x.toggleDropdown({}))}},J(e)),{},{children:[e.children,Object(f.jsx)(Xt,{}),Object(f.jsx)(Ge,{}),Object(f.jsx)(Re,{}),Object(f.jsx)(Pe,{}),Object(f.jsx)(De,{}),Object(f.jsx)(Ke,{}),Object(f.jsx)(Je,{}),Object(f.jsx)(Nt,{}),Object(f.jsx)(et,{})]}))},en=n.p+"static/media/chat.304c50bf.svg",tn=n.p+"static/media/devices.99f78ca4.svg",nn=n.p+"static/media/friends.547620e1.svg",cn=n.p+"static/media/secure.7370ac46.svg",an=n(162),rn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.meta.userCount}));Object(a.useEffect)((function(){e((function(e){e(U.restCallBegan({onSuccess:[st.updatedUserCount.type],url:"/users/count"}))}))}),[]);var n=function(e){return Object(f.jsxs)("div",{"data-v-59c13769":"",children:[Object(f.jsx)("h3",{className:"text-center text-1xl font-black font mb-4","data-v-59c13769":"",children:e.title}),Object(f.jsx)("img",{className:"w-44 inline",src:e.src,alt:"Chat","data-v-59c13769":""})]})},c=[];return document.addEventListener("keyup",(function(e){if(c.push(e.key),c.join("").endsWith("testing123"))try{document.querySelector("h1").textContent="Easteregg++",document.querySelector(".lead").textContent="Are you happy now?"}catch(t){}})),Object(f.jsxs)(Qt,{className:"z-10 bg-bg-tertiary h-full relative",pageTitle:"accord.app | Like Discord but Cooler","data-v-59c13769":"",children:[Object(f.jsx)(h,{"data-v-59c13769":""}),Object(f.jsxs)("section",{className:"z-10 text-center my-4","data-v-59c13769":"",children:[Object(f.jsx)("h1",{"data-v-59c13769":"",children:"It's time to ditch Discord and Zoom."}),Object(f.jsx)("div",{className:"flex justify-center","data-v-59c13769":"",children:Object(f.jsxs)("div",{className:"lead font-light mt-2 max-w-xl","data-v-59c13769":"",children:["All-in-one text and voice chat, just like Discord. Stop paying for Discord boosts and hassling with Zoom.",Boolean(t)&&Object(f.jsxs)("span",{className:"pl-1","data-v-59c13769":"",children:["Join ",Object(f.jsx)(an.a,{value:t,displayType:"text",thousandSeparator:!0,"data-v-59c13769":""})," Accord users that simplified their life."]})]})}),Object(f.jsx)("button",{className:"font-primary shadow-md bg-green text-dark","data-v-59c13769":"",children:Object(f.jsx)(l.b,{to:"/login","data-v-59c13769":"",children:Object(f.jsx)(K,{className:"bg-white text-black rounded w-56 h-11 px-6 mt-8","data-v-59c13769":"",children:"Login"})})}),Object(f.jsx)("button",{className:"shadow-md bg-green text-dark ml-10","data-v-59c13769":"",children:Object(f.jsx)(l.b,{to:"/channels/@me","data-v-59c13769":"",children:Object(f.jsx)(K,{className:"text-black bg-success rounded W-56 h-11 px-6 mt-8","data-v-59c13769":"",children:"Open Accord in Your Browser"})})})]}),Object(f.jsxs)("section",{title:"*Description may represent unreleased features.*",className:"absolute top-50 w-1/2 inset-x-1/4 flex justify-between","data-v-59c13769":"",children:[Object(f.jsx)(n,{src:en,title:"Chat w/ Friends","data-v-59c13769":""}),Object(f.jsx)(n,{src:tn,title:"On Mobile or Desktop","data-v-59c13769":""}),Object(f.jsx)(n,{src:nn,title:"Join and Manage Guilds","data-v-59c13769":""}),Object(f.jsx)(n,{src:cn,title:"Super Secure","data-v-59c13769":""})]})]})},sn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.activeChannel})),n=Object(d.c)((function(e){return e.ui.activeGuild})),c=Object(d.c)((function(e){return e.config.memberListToggled}));return Object(f.jsxs)("div",{className:"shadow-elevation flex items-center h-12 px-5",children:[t&&Object(f.jsx)(de.a,{icon:oe.k,className:"scale-150 mr-2"}),Object(f.jsxs)("h3",{className:"flex-grow ml-1",children:[Object(f.jsx)("span",{className:"font-bold",children:null===t||void 0===t?void 0:t.name}),Object(f.jsx)("span",{className:"muted ml-3",children:null===t||void 0===t?void 0:t.summary})]}),n&&Object(f.jsx)(de.a,{onClick:function(){return e((function(e,t){var n=t().config;e(at.toggleMemberList()),nt("memberListToggled",!n.memberListToggled)}))},icon:oe.v,className:j()("cursor-pointer",{heading:c,muted:!c})})]})},ln=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.user})),n=function(){var n,c,a=null===(n=t.voice)||void 0===n?void 0:n.channelId,r=Object(d.c)(Y(null!==a&&void 0!==a?a:"")),i=Object(d.c)(ie(null!==(c=null===r||void 0===r?void 0:r.guildId)&&void 0!==c?c:"")),s=Object(d.c)((function(e){return e.meta.ping}));return r&&i?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"justify-between flex items-center p-3 pr-4",children:[Object(f.jsxs)("div",{title:s?"Ping ".concat(s,"ms"):"Pinging server...",children:[Object(f.jsx)(de.a,{icon:oe.q,className:j()({success:s&&s<100,secondary:s&&s>=100&&s<200,warning:s&&s>=200&&s<300,danger:s&&s>=300,muted:!s})}),Object(f.jsx)("strong",{className:"success ml-2",children:"Voice Connected"}),Object(f.jsxs)("div",{className:"normal",children:[r.name," / ",i.name]})]}),Object(f.jsx)(de.a,{onClick:function(){return e((function(e){e(U.wsCallBegan({event:"CHANNEL_LEAVE"}))}))},className:"float-right cursor-pointer",icon:oe.o})]}),Object(f.jsx)("hr",{className:"border-bg-primary"})]}):null};return Object(f.jsxs)("div",{className:"bg-bg-secondary-alt",children:[Object(f.jsx)(n,{}),Object(f.jsxs)("div",{className:"relative flex items-center py-2",children:[Object(f.jsx)("div",{className:"select-all",children:Object(f.jsx)(Qe,{user:t})}),Object(f.jsx)(de.a,{onClick:function(){return e(x.openedModal("UserSettings"))},className:"float-right cursor-pointer absolute right-4",icon:oe.e})]})]})},on=function(e){var t=Object(d.c)((function(e){return e.ui.openDropdown}));return Object(f.jsxs)("div",{className:"w-full pt-3",children:[Object(f.jsxs)("div",{className:"flex justify-between items-center",children:[Object(f.jsx)("h1",{className:"flex-grow font-bold pl-2",children:e.title}),Object(f.jsx)(de.a,{icon:oe.d})]}),t===e.type.name&&Object(f.jsx)("div",{className:"absolute bg-bg-floating rounded w-56 p-2 mt-5",children:e.children})]})},dn=function e(){var t=Object(d.b)(),n=Object(d.c)((function(e){return e.ui.activeGuild})),c=_e();return n?Object(f.jsxs)(on,{title:n.name,type:e,children:[c.can("CREATE_INVITE",n.id)&&Object(f.jsxs)("a",{className:"rounded-sm flex items-center justify-between text-sm p-2 h-8 mb-1",onClick:function(){return t(x.openedModal("CreateInvite"))},children:[Object(f.jsx)("span",{className:"primary",children:"Invite people"}),Object(f.jsx)(de.a,{className:"float-right w-1",icon:oe.w})]}),c.can("MANAGE_CHANNELS",n.id)&&Object(f.jsxs)("a",{className:"rounded-sm flex items-center justify-between p-2 h-8 text-sm mb-1",onClick:function(){return t(x.openedModal("CreateChannel"))},children:[Object(f.jsx)("span",{className:"font",children:"Create channel"}),Object(f.jsx)(de.a,{className:"float-right w-1",icon:oe.p})]}),(c.can("MANAGE_GUILD",n.id)||c.can("MANAGE_ROLES",n.id)||c.can("MANAGE_INVITES",n.id))&&Object(f.jsxs)("a",{onClick:function(){return t(x.openedModal("GuildSettings"))},className:"rounded-sm flex items-center justify-between p-2 h-8 text-sm",children:[Object(f.jsx)("span",{className:"font",children:"Guild settings"}),Object(f.jsx)(de.a,{className:"float-right w-1",icon:oe.e})]})]}):null},un=function(e){var t=e.channel,n=Object(d.b)(),c=Object(o.i)().guildId,a=_e(),r=Object(d.c)((function(e){return e.config.devMode}));return c?Object(f.jsxs)(X.a,{id:t.id,className:"bg-bg-tertiary rounded shadow w-52 p-2",children:[a.can("MANAGE_CHANNELS",c)&&Object(f.jsxs)(X.c,{className:"danger cursor-pointer",onClick:function(){return n(z(t.id))},children:[Object(f.jsx)("span",{children:"Delete channel"}),Object(f.jsx)(de.a,{icon:oe.s,className:"float-right"})]}),r&&Object(f.jsx)(ue,{ids:[{title:"Channel ID",id:t.id}]})]},t.id):null},bn=(n(230),function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui})),n=t.activeGuild,c=t.activeChannel,a=Object(d.c)(se(null===n||void 0===n?void 0:n.id)),r=_e();if(!n||!r.can("VIEW_CHANNELS",n.id))return null;var i=function(t){var a=t.channel,i="VOICE"===a.type?"#":"/channels/".concat(n.id,"/").concat(a.id),s={TEXT:oe.k,VOICE:oe.y}[a.type],o=function(){var e,t=Object(d.c)((e=a.id,Object(p.a)((function(e){return{channels:e.entities.channels,users:e.entities.users}}),(function(t){var n=t.channels,c=t.users;return n.find((function(t){return t.id===e})).userIds.map((function(e){return c.find((function(t){return t.id===e}))}))}))));return"VOICE"===a.type&&t.length?Object(f.jsx)("div",{className:"p-2 pl-3","data-v-2f37e103":"",children:t.map((function(e){return Object(f.jsx)(X.b,{id:e.id,"data-v-2f37e103":"",children:Object(f.jsx)("div",{className:"mb-1","data-v-2f37e103":"",children:Object(f.jsx)(Qe,{user:e,size:"sm",guild:n,"data-v-2f37e103":""})})},e.id)}))}):null};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(X.b,{id:a.id,"data-v-2f37e103":"",children:Object(f.jsxs)(l.b,{onClick:function(){var t;"VOICE"===a.type&&e((t=a.id,function(e,n){var c=Y(t)(n()),a=n().auth.user;c.userIds.includes(a.id)||e(U.wsCallBegan({event:"CHANNEL_JOIN",data:{channelId:t}}))}))},to:i,className:j()("cursor-pointer flex items-center rounded h-8 p-2 pl-3",{active:a.id===(null===c||void 0===c?void 0:c.id)}),"data-v-2f37e103":"",children:[Object(f.jsx)(de.a,{className:j()("float-left scale-150 muted fill-current","VOICE"===a.type?"mr-2":"mr-3"),icon:s,"data-v-2f37e103":""}),Object(f.jsxs)("span",{className:"tab flex-grow flex justify-between","data-v-2f37e103":"",children:[Object(f.jsx)("span",{"data-v-2f37e103":"",children:a.name}),Object(f.jsx)("span",{onClick:function(t){t.preventDefault(),t.stopPropagation(),e(x.pageSwitched({channel:a,guild:n})),e(x.openedModal("ChannelSettings"))},className:"cursor-pointer opacity-100","data-v-2f37e103":"",children:r.can("MANAGE_CHANNELS",n.id)&&Object(f.jsx)(de.a,{className:"settings",icon:oe.e,"data-v-2f37e103":""})})]}),Object(f.jsx)(un,{channel:a,"data-v-2f37e103":""})]})},a.id),Object(f.jsx)(o,{"data-v-2f37e103":""})]})};return Object(f.jsx)(f.Fragment,{children:a.map((function(e){return Object(f.jsx)(i,{channel:e,"data-v-2f37e103":""},e.id)}))})}),jn=function(){var e=Object(d.b)();return Object(f.jsxs)("div",{className:"flex flex-col bg-bg-secondary w-60",children:[Object(f.jsx)("div",{className:"items-center shadow-elevation cursor-pointer h-12 pl-2.5 pr-4",onClick:function(){return e(x.toggleDropdown(dn))},children:Object(f.jsx)(dn,{})}),Object(f.jsx)("nav",{className:"flex-grow px-2 pt-4",children:Object(f.jsx)(bn,{})}),Object(f.jsx)(ln,{})]})},fn=function(e){var t=e.guild,n=Object(d.b)(),c=Object(d.c)((function(e){return e.config.devMode}));return Object(f.jsxs)(X.a,{id:t.id,className:"bg-bg-tertiary rounded shadow w-48 p-2",children:[Object(f.jsxs)(X.c,{className:"flex items-center justify-between danger cursor-pointer",onClick:function(){return n((e=t.id,function(t,n){var c=n().auth.user;t(U.wsCallBegan({event:"GUILD_MEMBER_REMOVE",data:{guildId:e,userId:c.id}}))}));var e},children:[Object(f.jsx)("span",{children:"Leave Guild"}),Object(f.jsx)(de.a,{icon:oe.g})]}),c&&Object(f.jsx)(ue,{ids:[{title:"Guild ID",id:t.id}]})]},t.id)},mn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.user})),n=Object(d.c)((function(e){return e.entities.guilds})).map((function(e){return Object(f.jsxs)(X.b,{id:e.id,children:[Object(f.jsx)(l.b,{to:"/channels/".concat(e.id),children:Object(f.jsx)(Xe,{to:"/channels/".concat(e.id),imageURL:e.iconURL,name:e.name})}),Object(f.jsx)(fn,{guild:e})]},e.id)})),c=function(){return Object(f.jsx)("div",{onClick:function(){return e(x.openedModal("CreateGuild"))},className:"success text-3xl",children:Object(f.jsx)(Xe,{name:"+",classes:"success"})})};return Object(f.jsxs)("div",{className:"overflow-auto min-h-screen float-left p-3 flex flex-col bg-bg-tertiary",children:[Object(f.jsx)(l.b,{to:"/channels/@me",children:Object(f.jsx)(Xe,{to:"/channels/@me",imageURL:t.avatarURL,name:t.username})}),Object(f.jsx)("div",{className:"flex justify-center mb-1",children:Object(f.jsx)("div",{className:"h-0.5 w-8 rounded-sm bg-bg-modifier-accent mb-1"})}),n,Object(f.jsx)(c,{})]})},hn=function(e){return Object(f.jsxs)("div",{className:"sidebar flex float-left",children:[Object(f.jsx)(mn,{}),Object(f.jsx)(jn,{})]})},On=(n(231),n(232),function(e){var t=e.message,n=Object(d.b)(),c=Object(d.c)((function(e){return e.auth.user})),a=Object(d.c)((function(e){return e.ui.activeGuild})),r=Object(d.c)((function(e){return e.ui.openModal})),i=_e(),s=t.authorId===c.id,l=i.canInChannel("MANAGE_MESSAGES",a.id,t.channelId)||(null===a||void 0===a?void 0:a.ownerId)===c.id||s;return r?null:Object(f.jsxs)("div",{className:"float-right shadow bg-bg-secondary px-2 rounded cursor-pointer",children:[s&&Object(f.jsx)("div",{className:"inline",children:Object(f.jsx)(de.a,{onClick:function(){return n(x.startedEditingMessage(t.id))},className:"mr-2",icon:oe.n})}),l&&Object(f.jsx)("div",{className:"inline",children:Object(f.jsx)(de.a,{onClick:function(){return n((e=t.id,function(t){t(U.wsCallBegan({event:"MESSAGE_DELETE",data:{messageId:e}}))}));var e},className:"danger",icon:oe.s})})]})}),pn=function(e){var t=e.message,n=Object(o.i)().guildId,c=Object(d.c)((function(e){return e.config.devMode}));return n?Object(f.jsxs)(X.a,{id:t.id,className:"bg-bg-tertiary rounded shadow w-48 p-2",children:[Object(f.jsx)("div",{className:"overflow-hidden",children:Object(f.jsx)("span",{className:"bg-bg-primary p-1 rounded max-w-full",children:t.content})}),c&&Object(f.jsx)(ue,{ids:[{title:"Message ID",id:t.id}]})]},t.id):null},vn=n(165),gn=function(e){var t,n,c=Object(d.d)(),i=Object(d.b)(),s=Object(a.useState)(null!==(t=e.content)&&void 0!==t?t:""),o=Object(C.a)(s,2),b=o[0],m=o[1],h=Object(d.c)((function(e){return e.ui.activeChannel})),O=Object(d.c)((function(e){return e.ui.activeGuild})),v=Object(d.c)((n=h.id,Object(p.a)((function(e){return e.entities.typing}),(function(e){return e.filter((function(e){return e.channelId===n}))})))),g=_e();Object(a.useEffect)((function(){var t,n;document.querySelector("#messageBox").value=null!==(t=null===(n=e.cachedContent)||void 0===n?void 0:n[h.id])&&void 0!==t?t:b}),[h.id]),Object(a.useEffect)((function(){e.cachedContent&&e.setCachedContent&&(e.cachedContent[h.id]=b,e.setCachedContent(e.cachedContent))}),[b]);var N=function(){return i(x.stoppedEditingMessage())},y=function(){var t,n;e.editingMessageId?i((t=e.editingMessageId,n={content:b},function(e){e(U.wsCallBegan({event:"MESSAGE_UPDATE",data:Object(u.a)({messageId:t},n)}))})):i(Ut(h.id,{content:b})),m(""),N()},E=function(t){"Escape"===t.key&&e.editingMessageId&&N()},w=g.canInChannel("SEND_MESSAGES",O.id,h.id),I=function(){var t=r.a.createRef();return e.editingMessageId?null:Object(f.jsx)("div",{className:"px-4",children:Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsx)("input",{ref:t,type:"file",name:"file",accept:"image/*",onChange:function(e){var t=e.target;i(function(e,t,n){return function(c){var a=function(){var n=Object(te.a)(ee.a.mark((function n(a){var r;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.url,n.abrupt("return",c(Ut(e,t,[r])));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();c(V(n,a))}}(h.id,{content:b},t.files[0]))},hidden:!0}),Object(f.jsx)(de.a,{icon:oe.t,onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()},className:"cursor-pointer z-1"})]})})};return Object(f.jsxs)("div",{className:"".concat(e.editingMessageId?"mt-2":"px-4"),children:[Object(f.jsxs)("div",{className:"rounded-lg bg-bg-secondary flex items-center",children:[Object(f.jsx)(I,{}),Object(f.jsx)(vn.a,{id:"messageBox",onChange:function(e){return m(e.target.value)},onKeyDown:function(e){E(e),i(function(e){return function(t,n){var c=qe()(new Date).diff(wt,"seconds");wt&&c<5||(wt=new Date,t(U.wsCallBegan({event:"TYPING_START",data:{channelId:e}})))}}(h.id)),"Enter"!==e.key||e.shiftKey||e.preventDefault();var t=b.replaceAll("\n","");"Enter"===e.key&&!e.shiftKey&&t&&y()},value:b,rows:1,className:j()("resize-none normal rounded-lg appearance-none leading-tight","focus:outline-none w-full right-5 left-5 max-h-96 py-3 px-4",{"cursor-not-allowed":!w}),placeholder:w?e.editingMessageId?void 0:"Message #".concat(h.name):"Insufficient perms.",disabled:!w,autoFocus:!0})]}),e.editingMessageId?Object(f.jsxs)("span",{className:"text-xs py-2",children:["escape to ",Object(f.jsx)(l.b,{to:"#",onClick:N,children:"cancel"})," \u2022 enter to ",Object(f.jsx)(l.b,{to:"#",onClick:y,children:" save"})]}):Object(f.jsx)("div",{className:"text-sm w-full h-6",children:function(){if(v.length){var e=v.map((function(e){return(t=e.userId,jt(t)(c.getState())).username;var t})).join(", ");return v.length>3?"Many users are typing...":"".concat(e," is typing...")}}()})]})},xn=/(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))/gm,Nn=n(163),yn=n.n(Nn),En=function(e){var t=e.message,n=Object(d.b)(),c=Object(d.c)((function(e){return e.ui.editingMessageId})),a=/\*\*\*([\s\S]*?)\*\*\*/g,r=/\*\*([\s\S]*?)\*\*/g,i=/\*([\s\S]*?)\*|_([\s\S]*?)_/g,s=/__([\s\S]*?)__/g,l=/__\*([\s\S]*?)\*__/g,o=/__\*\*([\s\S]*?)\*\*__/g,u=/__\*\*\*([\s\S]*?)\*\*\*__/g,b=/~~([\s\S]*?)~~/g,j=/```([\s\S]*?)```/g,m=/`([\s\S]*?)`/g,h=/>>> ([\s\S]*)/g,O=/^> (.*)$/gm,p=(t.content?yn()(t.content).replace(a,"<strong><em>$1</em></strong>").replace(r,"<strong>$1</strong>").replace(i,"<em>$1$2</em>").replace(s,"<u>$1</u>").replace(l,"<u><em>$1</em></u>").replace(o,"<u><strong>$1</strong></u>").replace(u,"<u><strong><em>$1</strong></em></u>").replace(b,"<del>$1</del>").replace(j,'<pre><code class="facade">$1</code></pre>').replace(m,'<code class="facade">$1</code>').replace(O,'<span class="blockquote pl-1">$1</span>').replace(h,'<div class="blockquote pl-1">$1</div>').replace(xn,'<a href="$1" target="_blank">$1</div>'):"")+(t.updatedAt&&t.content?'<span\n        class="select-none muted edited text-xs ml-1"\n        title="'.concat(t.updatedAt,'">(edited)</span>'):""),v=function(){var e;return Object(f.jsx)(f.Fragment,{children:null===(e=t.attachmentURLs)||void 0===e?void 0:e.map((function(e){return Object(f.jsx)("img",{style:{maxWidth:"384px"},className:"my-2 cursor-pointer",onClick:function(){return n((t=e,function(e){e(x.focusedResource(t)),e(x.openedModal("ImagePreview"))}));var t},src:"https://api.accord.app/assets"+e,onError:function(e){e.currentTarget.onerror=null,e.currentTarget.src="".concat("https://api.accord.app/assets","/images/image-not-found.png")}},e)}))})};return c===t.id?Object(f.jsx)(gn,{content:t.content,editingMessageId:t.id}):Object(f.jsx)("div",{className:"relative",children:Object(f.jsxs)("div",{style:{maxWidth:"963px"},className:"normal whitespace-pre-wrap",children:[Object(f.jsx)("div",{dangerouslySetInnerHTML:{__html:p},className:"overflow-auto",style:{maxWidth:"100%"}}),Object(f.jsx)(v,{})]})})},wn=function(e){var t,n=e.author,c=e.message,a=e.isExtra,r=Object(d.c)((function(e){return e.ui.activeGuild})),i=Object(d.c)(ye(r.id,c.authorId)),s=Object(d.c)(Ae(r.id,null!==(t=null===i||void 0===i?void 0:i.userId)&&void 0!==t?t:""));if(a||!i)return null;var l=function(e){return e.getTime()/1e3/60/60/24},o=new Date(c.createdAt),u=new Date((new Date).setHours(0,0,0,0)),b=Math.floor(l(u)-l(o));return Object(f.jsxs)("div",{children:[Object(f.jsx)(X.b,{id:n.id,children:Object(f.jsx)("span",{style:{color:s.color},className:"text-base heading hover:underline cursor-pointer mr-2",children:n.username})}),Object(f.jsx)("span",{className:"text-xs",children:qe()(o).format(u.getDate()===o.getDate()?"[Today at] HH:mm":1===b?"[Yesterday at] HH:mm":"DD/MM/YYYY")})]})},In=function(e){var t=e.message,n=Object(d.c)(jt(t.authorId)),c=Object(d.c)(Rt(t.channelId)),a=new Date(t.createdAt),r=function(){var e=c.findIndex((function(e){return e.id===t.id})),n=c[e-1];if(!n)return!1;return qe()(a).diff(n.createdAt,"minutes")<=5&&n.authorId===t.authorId}(),i=function(){var e=Object(d.b)();return r?Object(f.jsx)("span",{className:"timestamp text-xs select-none","data-v-f168661d":"",children:qe()(a).format("HH:mm")}):Object(f.jsx)(Ze,{className:"rounded-full cursor-pointer w-10 h-10",src:"".concat("https://api.accord.app/assets").concat(n.avatarURL),onError:function(e){return e.currentTarget.src="".concat("https://api.accord.app/assets","/avatars/unknown.png")},onClick:function(){return e(E(n))},alt:n.username,"data-v-f168661d":""})};return Object(f.jsxs)(X.b,{id:t.id,"data-v-f168661d":"",children:[Object(f.jsxs)("div",{className:j()("message flex",{"mt-4":!r}),"data-v-f168661d":"",children:[Object(f.jsx)("div",{className:"flex-shrink-0 left-side text-xs w-16 mr-2 pl-5 pt-1","data-v-f168661d":"",children:Object(f.jsx)(i,{"data-v-f168661d":""})}),Object(f.jsxs)("div",{className:"relative flex-grow px-2","data-v-f168661d":"",children:[Object(f.jsx)("div",{className:"absolute toolbar right-0 -mt-3 z-10","data-v-f168661d":"",children:Object(f.jsx)(On,{message:t,"data-v-f168661d":""})}),Object(f.jsx)(wn,{author:n,message:t,isExtra:r,"data-v-f168661d":""}),Object(f.jsx)(En,{message:t,"data-v-f168661d":""})]}),Object(f.jsx)("div",{className:"right-side w-12","data-v-f168661d":""})]}),Object(f.jsx)(pn,{message:t,"data-v-f168661d":""})]},t.id)},Cn=function(e){var t=e.canRead,n=Object(d.c)((function(e){return e.ui.activeChannel}));return Object(f.jsxs)("div",{className:"m-4 pb-6 border-bottom",children:[Object(f.jsx)("span",{className:"rounded-full",children:Object(f.jsx)(de.a,{className:"muted",icon:t?oe.k:oe.i,size:"3x"})}),Object(f.jsx)("h1",{className:"text-3xl font-bold my-2",children:t?"Welcome to #".concat(n.name,"!"):"Message history hidden."}),Object(f.jsx)("p",{className:"lead",children:t?"This is the start of the #".concat(n.name," channel."):"Insufficient permissions to view messages in this channel."})]})},Sn=function(){return Object(f.jsx)("div",{className:"rounded-md px-5 py-2 max-w-sm w-full",children:Object(f.jsxs)("div",{className:"animate-pulse flex space-x-4",children:[Object(f.jsx)("div",{className:"rounded-full bg-bg-tertiary h-10 w-10"}),Object(f.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[Object(f.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-3/4"}),Object(f.jsxs)("div",{className:"space-y-2",children:[Object(f.jsx)("div",{className:"h-4 bg-bg-tertiary rounded"}),Object(f.jsx)("div",{className:"h-4 bg-bg-tertiary rounded w-5/6"})]})]})]})})},An=function(){var e,t=Object(d.b)(),n=Object(d.c)((function(e){return e.ui.activeChannel})),c=Object(d.c)((function(e){return e.ui.activeGuild})),r=Object(d.c)(Rt(n.id)),i=_e(),s=Object(a.useState)({}),l=Object(C.a)(s,2),o=l[0],u=l[1];Object(a.useEffect)((function(){var e;t((e=n.id,function(t,n){n().entities.messages.list.some((function(t){return t.channelId===e}))||t(U.restCallBegan({onSuccess:[Vt.fetched.type],url:"/channels/".concat(e,"/messages?back=100"),headers:G()}))}));var c=document.querySelector("#messages");c.scrollTop=c.scrollHeight}),[r.length]),Object(a.useEffect)((function(){document.querySelector("#messageBox").focus()}),[n.id]);var b=n.lastMessageId===(null===(e=r[r.length])||void 0===e?void 0:e.id),j=i.canInChannel("READ_MESSAGES",c.id,n.id);return Object(f.jsxs)("div",{className:"h-full flex flex-col flex-grow",children:[Object(f.jsxs)("div",{id:"messages",className:"overflow-auto mb-5 mr-1 mt-1 flex-grow",children:[Object(f.jsx)(Cn,{canRead:j}),!(j||b)&&new Array(6).fill(0).map((function(e,t){return Object(f.jsx)(Sn,{},t)})),j&&r.map((function(e){return Object(f.jsx)(In,{message:e},e.id)}))]}),Object(f.jsx)(gn,{cachedContent:o,setCachedContent:u})]})},kn=function(e){var t=e.member,n=function(e){return e.slice(1)},c=n(t.roleIds),r=_e(),i=Object(d.b)(),s=Object(d.c)((function(e){return e.ui.activeGuild})),l=n(Object(d.c)(le(s.id))),o=Object(a.useState)(c),b=Object(C.a)(o,2),j=b[0],m=b[1],h={control:function(){return{width:"200px",backgroundColor:"var(--bg-secondary)"}},option:function(e,t){var n=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:n.color,backgroundColor:"var(--bg-secondary)",cursor:n.disabled?"not-allowed":"pointer",opacity:n.disabled?.5:1})},input:function(e){return Object(u.a)(Object(u.a)({},e),{},{color:"var(--font)"})},menu:function(e){return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:"var(--bg-secondary)"})},multiValue:function(e){return Object(u.a)(Object(u.a)({},e),{},{color:"var(--font)",backgroundColor:"var(--bg-tertiary)"})},indicatorSeparator:function(){return{display:"none"}},indicatorsContainer:function(e){return Object(u.a)(Object(u.a)({},e),{},{float:"right"})},multiValueLabel:function(e,t){var n=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:n.color,backgroundColor:"var(--bg-tertiary)"})}},O=JSON.stringify(j)!==JSON.stringify(c),p=function(e){return{label:e.name,value:e.id,color:e.color,disabled:!r.memberIsHigher(s.id,[e.id])}};return Object(f.jsx)("div",{onClick:function(e){return e.preventDefault()},children:Object(f.jsx)(fe.a,{defaultValue:j.map((function(e){var t=l.find((function(t){return t.id===e}));return t?p(t):void 0})),name:"colors",options:l.map(p),isOptionDisabled:function(e){return e.disabled},onChange:function(e){return m(e.map((function(e){return e.value})))},onMenuClose:function(){return O&&i((e=t.id,n={roleIds:j},function(t){t(U.wsCallBegan({event:"GUILD_MEMBER_UPDATE",data:Object(u.a)({memberId:e},n)}))}));var e,n},styles:h,placeholder:"Add roles...",noOptionsMessage:function(){return"No roles to add"},isMulti:!0})})},Mn=function(e){var t,n=e.user,c=Object(d.b)(),a=_e(),r=Object(d.c)((function(e){return e.auth.user})),i=Object(d.c)((function(e){return e.ui.activeGuild})),s=Object(d.c)(ye(i.id,n.id)),l=Object(d.c)((function(e){return e.config.devMode})),o=n.id===r.id,u=null===(t=r.ignored)||void 0===t?void 0:t.userIds.includes(s.userId),b=a.can("KICK_MEMBERS",i.id),j=a.can("MANAGE_ROLES",i.id);return Object(f.jsxs)(X.a,{id:n.id,className:"bg-bg-tertiary p-2 rounded shadow",children:[Object(f.jsxs)(X.c,{onClick:function(){return c(E(n))},className:"flex items-center justify-between cursor-pointer",children:[Object(f.jsx)("span",{children:"View Profile"}),Object(f.jsx)(de.a,{icon:oe.u})]}),n.id!==r.id&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("hr",{className:"my-2 border-bg-primary"}),Object(f.jsxs)(X.c,{className:"flex items-center justify-between  cursor-pointer danger",children:[Object(f.jsx)("span",{onClick:function(){return c((e=s.userId,function(t,n){var c;console.log("hi");var a=n().auth.user,r=JSON.parse(JSON.stringify(a.ignored));if(r.userIds=null!==(c=r.userIds)&&void 0!==c?c:[],r.userIds.includes(e)){var i=r.userIds.indexOf(e);r.userIds.splice(i,1)}else r.userIds.push(e);t(U.wsCallBegan({event:"USER_UPDATE",data:{token:R(),ignored:r}}))}));var e},children:u?"Unblock":"Block"}),Object(f.jsx)(de.a,{icon:oe.a})]})]}),(b||j)&&Object(f.jsxs)("div",{children:[Object(f.jsx)("hr",{className:"my-2 border-bg-primary"}),Object(f.jsx)(S,{title:"Manage Roles",className:"pb-2"}),!o&&a.can("KICK_MEMBERS",i.id)&&Object(f.jsx)(X.c,{className:"danger cursor-pointer mb-2",onClick:function(){var e,t,a=n.discriminator.toString().padStart(4,"0");window.confirm("Kick ".concat(n.username,"#").concat(a))&&c((e=i.id,t=n.id,function(n){n(U.wsCallBegan({event:"GUILD_MEMBER_REMOVE",data:{guildId:e,userId:t}}))}))},children:Object(f.jsxs)("span",{children:["Kick ",n.username]})}),a.can("MANAGE_ROLES",i.id)&&Object(f.jsx)(kn,{member:s})]}),Object(f.jsx)("div",{className:"my-4"}),l&&Object(f.jsx)(ue,{ids:[{title:"User ID",id:n.id},{title:"Member ID",id:s.id}]})]})},Tn=function(){var e,t=_e(),n=Object(d.c)((function(e){return e.ui.activeGuild})),c=Object(d.c)((function(e){return e.config.memberListToggled})),a=Object(d.c)((e=n.id,Object(p.a)((function(e){return e.entities.roles}),(function(t){return t.filter((function(t){return t.guildId===e&&t.hoisted}))})))),r=Object(d.c)(function(e){return Object(p.a)((function(e){return e.entities.members}),(function(t){return t.filter((function(t){return t.guildId===e}))}))}(n.id)),i=Object(d.c)(function(e){return Object(p.a)((function(e){return{members:e.entities.members,users:e.entities.users}}),(function(t){var n=t.members,c=t.users;return n.filter((function(t){return t.guildId===e})).map((function(e){return c.find((function(t){return t.id===e.userId}))}))}))}(n.id)).filter((function(e){var c=r.find((function(t){return t.userId===e.id}));return t.canMember("VIEW_CHANNELS",n,c)})),s=function(e){var t=e.category,c=e.filter,a=i.filter(c).sort((function(e,t){return e.username.localeCompare(t.username)}));return a.length?Object(f.jsxs)("div",{children:[Object(f.jsx)(S,{className:"pt-6 pr-2 pl-4 h-10 mb-2 ml-2",title:t,count:a.length}),a.map((function(e){return Object(f.jsxs)(X.b,{id:e.id,children:[Object(f.jsx)("div",{className:"m-2",children:Object(f.jsx)(Qe,{guild:n,user:e})}),Object(f.jsx)(Mn,{user:e})]},e.id)}))]}):null},l=function(e){return r.find((function(t){return t.userId===e})).roleIds},o=function(e,t){return e.position<t.position?1:-1},u=function(e){return l(e.id).map((function(e){return a.find((function(t){return e===t.id}))})).filter((function(e){return e})).sort(o).map((function(e){return e.id}))};return c?Object(f.jsxs)("div",{className:"overflow-auto bg-bg-secondary w-64",children:[a.map((function(e){return Object(f.jsx)(s,{category:e.name,filter:function(t){return l(t.id).includes(e.id)&&u(t)[0]===e.id&&"ONLINE"===t.status}},e.id)})),Object(f.jsx)(s,{category:"Online",filter:function(e){return"ONLINE"===e.status&&!u(e).length}}),Object(f.jsx)(s,{category:"Offline",filter:function(e){return"OFFLINE"===e.status}})]}):null},_n=function(){var e,t=Object(o.i)(),n=t.channelId,c=t.guildId,r=Object(d.b)(),i=Object(d.c)((function(e){return e.ui})),s=Object(d.c)(ie(c)),l=Object(d.c)(Y(n)),u=Object(d.c)(se(c));if(Object(a.useEffect)((function(){r(x.pageSwitched({channel:l,guild:s}))}),[s,l]),!s)return Object(f.jsx)(o.a,{to:"/channels/@me"});if(u.length&&!n){var b=u[0];return Object(f.jsx)(o.a,{to:"/channels/".concat(s.id,"/").concat(b.id)})}return i.activeGuild?Object(f.jsxs)(Qt,{pageTitle:null!==(e=null===l||void 0===l?void 0:l.name)&&void 0!==e?e:s.name,children:[Object(f.jsx)(hn,{}),l?Object(f.jsxs)("div",{className:"bg-bg-primary",children:[Object(f.jsx)(sn,{}),Object(f.jsxs)("div",{style:{height:"calc(100vh - 48px)"},className:"flex",children:[i.activeChannel&&{TEXT:Object(f.jsx)(An,{}),VOICE:Object(f.jsx)("div",{className:"w-full p-2",children:"Add something cool here for voice channels?"})}[l.type],Object(f.jsx)(Tn,{})]})]}):Object(f.jsx)("div",{className:"bg-bg-tertiary"})]}):null},Ln=(n(233),n(58)),Dn=n.n(Ln),Gn=function(){var e=Object(d.b)(),t=Object(L.a)();return Object(f.jsxs)("div",{children:[Object(f.jsx)("hr",{className:"border-gray-500 my-4"}),Object(f.jsxs)("div",{className:"flex items-end",children:[Object(f.jsx)($,{type:"text",name:"code",label:"Verify Code",className:"w-full mr-2",register:t.register}),Object(f.jsx)(K,{type:"button",onClick:function(){return e(gt(t.getValues().code))},className:"bg-success text-black h-10",children:"Verify"})]})]})},Rn=function(){var e,t=Object(d.b)(),n=Object(L.a)(),c=n.register,r=n.handleSubmit,i=n.getValues,s=Object(d.c)((function(e){return e.auth.user})),u=Object(d.c)((function(e){return e.auth.shouldVerify})),b=new URLSearchParams(Object(o.h)().search),j=Object(a.useState)(null!==(e=b.get("email"))&&void 0!==e?e:""),m=Object(C.a)(j,2),h=m[0],O=m[1];return s?Object(f.jsx)(o.a,{to:"/channels/@me","data-v-742b621d":""}):Object(f.jsxs)(Qt,{pageTitle:"accord.app | Login","data-v-742b621d":"",children:[Object(f.jsx)("div",{className:"flex items-center absolute justify-center h-screen","data-v-742b621d":"",children:Object(f.jsxs)("form",{className:"rounded-md shadow bg-bg-primary p-8",onSubmit:r((function(e){return t(function(e){return function(t){t(U.restCallBegan({onSuccess:[],method:"post",data:e,url:"/auth/login",callback:function(e){e.token&&(localStorage.setItem("token",e.token),t(pt())),e.message&&(t(ht.shouldVerify()),t(w({content:e.message,variant:"info"})))}}))}}(e))})),"data-v-742b621d":"",children:[Object(f.jsx)("h1",{className:"text-3xl font-bold","data-v-742b621d":"",children:"Welcome back!"}),Object(f.jsx)("p",{className:"lead","data-v-742b621d":"",children:"We're so excited to see you again!"}),Object(f.jsx)($,{label:"Email",name:"email",register:c,className:"mt-3",defaultValue:h,onInput:function(e){return O(e.currentTarget.value)},"data-v-742b621d":""}),Object(f.jsx)($,{label:"Password",name:"password",type:"password",register:c,className:"mt-3","data-v-742b621d":""}),Object(f.jsx)(l.b,{to:"#",onClick:function(){return t(function(e){return function(t){e&&t(U.restCallBegan({callback:function(){return t(w({variant:"info",content:"Sent reset password instructions to email, if email is registered"}))},url:"/auth/email/forgot-password?email=".concat(e)}))}}(i().email))},"data-v-742b621d":"",children:"Forgot your password?"}),u&&Object(f.jsx)(Gn,{"data-v-742b621d":""}),Object(f.jsx)(K,{className:"bg-primary font w-full h-11 rounded-md mt-8","data-v-742b621d":"",children:u?"Resend Code":"Login"}),Object(f.jsxs)("p",{className:"mt-2","data-v-742b621d":"",children:["Need an account? ",Object(f.jsx)(l.b,{to:"/register".concat(h&&"?email=".concat(h)),"data-v-742b621d":"",children:"Register"})]})]})}),Object(f.jsx)(Dn.a,{width:"100%",height:"100%","data-v-742b621d":""})]})},Un=(n(545),function(){var e,t=Object(d.c)((function(e){return e.auth.user})),n=Object(d.b)(),c=Object(L.a)(),r=c.register,i=c.handleSubmit,s=new URLSearchParams(Object(o.h)().search),u=Object(a.useState)(null!==(e=s.get("email"))&&void 0!==e?e:""),b=Object(C.a)(u,2),j=b[0],m=b[1];return t?Object(f.jsx)(o.a,{to:"/channels/@me","data-v-6c02e748":""}):Object(f.jsxs)(Qt,{"data-v-6c02e748":"",children:[Object(f.jsx)("div",{className:"flex items-center justify-center absolute h-screen","data-v-6c02e748":"",children:Object(f.jsxs)("form",{className:"rounded-md shadow bg-bg-primary p-8",onSubmit:i((function(e){return n(function(e){return function(t){t(U.restCallBegan({onSuccess:[ht.loggedIn.type],method:"post",data:e,url:"/auth/register",callback:function(e){localStorage.setItem("token",e),t(pt())}}))}}(e))})),"data-v-6c02e748":"",children:[Object(f.jsx)("h1",{className:"text-2xl font-bold mb-8 text-center","data-v-6c02e748":"",children:"Create an account"}),Object(f.jsx)($,{label:"Email",name:"email",register:r,className:"mt-3",defaultValue:j,onInput:function(e){return m(e.currentTarget.value)},"data-v-6c02e748":""}),Object(f.jsx)($,{label:"Username",name:"username",register:r,className:"mt-3","data-v-6c02e748":""}),Object(f.jsx)($,{label:"Password",name:"password",type:"password",register:r,className:"mt-3","data-v-6c02e748":""}),Object(f.jsx)(K,{className:"bg-primary font w-full h-11 rounded-md mt-8","data-v-6c02e748":"",children:"Register"}),Object(f.jsx)("p",{className:"mt-2","data-v-6c02e748":"",children:Object(f.jsx)(l.b,{to:"/login".concat(j&&"?email=".concat(j)),"data-v-6c02e748":"",children:"Already have an account?"})})]})}),Object(f.jsx)(Dn.a,{width:"100%",height:"100%","data-v-6c02e748":""})]})}),Vn=function(){var e=Object(d.b)();return Object(a.useEffect)((function(){e(x.pageSwitched({channel:null,guild:null}))}),[]),Object(f.jsxs)(Qt,{className:"bg-bg-primary h-full w-full",pageTitle:"accord.app",children:[Object(f.jsx)(hn,{}),Object(f.jsx)(sn,{}),Object(f.jsx)("div",{className:"bg-bg-primary h-full w-full flex flex-col flex-grow"})]})},Bn=function(){return Object(d.b)()(vt()),Object(f.jsx)(o.a,{to:"/",push:!0})},Pn=function(){return function(e){e(U.restCallBegan({onSuccess:[],headers:G(),url:"/users/entities",callback:function(t){e(H.fetched(t.channels)),e(ce.fetched(t.guilds)),e(xe.fetched(t.members)),e(Ie.fetched(t.roles)),e(dt.fetched(t.users)),e(st.fetchedEntities())}}))}},Hn=function(){var e=Object(d.b)();Object(a.useEffect)((function(){e(pt()),e(Pn())}),[]);var t=["Did Discord steal our idea?!?!","ADAMJR, Stop refactoring code please. okthxbye.","Sample Text.","!('Hello World')","May work on a Tesla","Please subscribe.","Hi YouTube!","accord.includes('VOICE_CHANNEL') === false","This message is officially dumb.","This message is funny.","Dear Bill Gates please buy my app okthxbye.","Is coding the same as programming? :thinking:","TypeError: There may be bugs.","What is a Discord? :thinking:","What's your Skype? Wait, actually I don't want your IP. Cya.","Started in 2020.","Disclaimer: Not actually a Discord clone."],n=Math.floor(Math.random()*t.length);return Object(f.jsx)(Qt,{pageTitle:"Loading...",className:"flex items-center justify-center h-screen",children:Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)("h1",{className:"text-3xl",children:"Loading..."}),Object(f.jsx)("p",{className:"lead block",children:t[n]})]})})},Fn=function(e){var t=Object(d.c)((function(e){return e.auth.user})),n=Object(d.c)((function(e){return e.meta.fetchedEntities}));return Object(d.c)((function(e){return e.auth.attemptedLogin}))&&!t?Object(f.jsx)(o.a,{to:"/login"}):t&&n?Object(f.jsx)(o.b,Object(u.a)({},e)):Object(f.jsx)(Hn,{})},zn=function(){return Object(f.jsxs)(Qt,{className:"relative w-screen h-screen",pageTitle:"accord.app | Not Found",children:[Object(f.jsxs)("header",{className:"absolute text-center bottom-1/2 right-1/2",children:[Object(f.jsx)("h1",{className:"text-4xl pb-3",children:"Not Found"}),Object(f.jsx)(l.b,{to:"/",children:Object(f.jsx)(m,{children:"Return Home"})})]}),Object(f.jsx)(Dn.a,{width:"100%",height:"100%"})]})},Wn=function(){var e,t=Object(d.c)((function(e){return e.auth.user})),n=Object(d.b)(),c=null===(e=new URLSearchParams(Object(o.h)().search).get("code"))||void 0===e?void 0:e.toString();return Object(a.useEffect)((function(){c&&n(gt(c))}),[]),t?Object(f.jsx)(o.a,{to:"/channels/@me"}):c?Object(f.jsx)(Hn,{}):Object(f.jsx)(o.a,{to:"/"})};function Yn(){var e=Object(d.b)();return Object(a.useEffect)((function(){e(pt()),e(Pn()),e((function(e,t){var n,c=t().auth.user,a=t().entities.channels,r={},i=Object(Pt.a)(a);try{for(i.s();!(n=i.n()).done;){var s,l=n.value;c.lastReadMessageIds[l.id],r[l.id]=null!==(s=r[l.id])&&void 0!==s?s:[],r[l.id].push(l.id)}}catch(o){i.e(o)}finally{i.f()}e(Ft.initialized(r))}))}),[]),Object(f.jsx)(l.a,{basename:"",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",component:rn}),Object(f.jsx)(o.b,{exact:!0,path:"/login",component:Rn}),Object(f.jsx)(o.b,{exact:!0,path:"/register",component:Un}),Object(f.jsx)(o.b,{exact:!0,path:"/logout",component:Bn}),Object(f.jsx)(o.b,{exact:!0,path:"/verify",component:Wn}),Object(f.jsx)(Fn,{exact:!0,path:"/channels/@me",component:Vn}),Object(f.jsx)(Fn,{exact:!0,path:"/channels/:guildId/:channelId?",component:_n}),Object(f.jsx)(o.b,{path:"*",component:zn})]})})}var Kn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,582)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Jn=n(39),$n=n(164),qn=n.n($n),Zn=function(e){return function(t){return function(){var n=Object(te.a)(ee.a.mark((function n(c){var a,r,i,s,l,o,d,u,b,j,f,m,h,O,p;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.type===U.restCallBegan.type){n.next=2;break}return n.abrupt("return",t(c));case 2:return a=c.payload,r=a.url,i=a.method,s=a.data,l=a.onSuccess,o=a.headers,d=a.callback,t(c),n.prev=4,n.next=7,qn.a.request({baseURL:"https://api.accord.app/v2",data:s,method:i,url:r,headers:o});case 7:if(u=n.sent,b=u.data,e.dispatch(U.restCallSucceded(b)),l){j=Object(Pt.a)(l);try{for(j.s();!(f=j.n()).done;)m=f.value,e.dispatch({type:m,payload:b})}catch(v){j.e(v)}finally{j.f()}}if(n.t0=d,!n.t0){n.next=15;break}return n.next=15,d(b);case 15:n.next=22;break;case 17:n.prev=17,n.t1=n.catch(4),p=n.t1.response,e.dispatch(U.restCallFailed({url:r,response:p})),e.dispatch(w({content:null!==(h=null===p||void 0===p||null===(O=p.data)||void 0===O?void 0:O.message)&&void 0!==h?h:"Unknown Error",variant:"error"}));case 22:case"end":return n.stop()}}),n,null,[[4,17]])})));return function(e){return n.apply(this,arguments)}}()}},Xn=function(e){return function(t){return function(){var n=Object(te.a)(ee.a.mark((function n(c){var a,r,i,s,l,o;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.type===U.wsCallBegan.type){n.next=2;break}return n.abrupt("return",t(c));case 2:a=c.payload,r=a.data,i=a.event,t(c),s=function(){Mt.off(i,l),Mt.off("error",o)},l=function(t){s(),e.dispatch(U.wsCallSucceded({event:i,payload:t}))},o=function(t){s(),e.dispatch(U.wsCallFailed({event:i,payload:t}))},Mt.on(i,l),Mt.on("error",o),Mt.emit(i,r);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}};n(563);s.a.render(Object(f.jsx)(A.a,{maxSnack:1,children:Object(f.jsx)(d.a,{store:Object(O.a)({middleware:[].concat(Object(D.a)(Object(O.d)({serializableCheck:!1})),[Xn,Zn]),reducer:Object(Jn.b)({auth:Ot,config:rt,entities:Object(Jn.b)({channels:F,invites:Be,guilds:ae,members:Ne,messages:Bt,pings:zt,typing:Dt,roles:Ce,users:ut}),meta:lt,ui:N})}),children:Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(Yn,{})})})}),document.getElementById("root")),Kn()}},[[564,1,2]]]);
//# sourceMappingURL=main.3307133a.chunk.js.map